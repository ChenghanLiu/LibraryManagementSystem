{"remainingRequest":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/babel-loader/lib/index.js!/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuchenghan/Desktop/LibraryManagementSystem/front/src/views/login.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/src/views/login.vue","mtime":1772220174906},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/babel.config.js","mtime":1772135377447},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/cache-loader/dist/cjs.js","mtime":1772203478686},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/babel-loader/lib/index.js","mtime":1772203478957},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/cache-loader/dist/cjs.js","mtime":1772203478686},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/vue-loader/lib/index.js","mtime":1772203474026}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgbWVudSBmcm9tICJAL3V0aWxzL21lbnUiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bGVzRm9ybTogewogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgcm9sZTogIiIKICAgICAgfSwKICAgICAgbWVudXM6IFtdLAogICAgICB0YWJsZU5hbWU6ICIiCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGJhY2tMb2dpbk1lbnVzOiBmdW5jdGlvbiBiYWNrTG9naW5NZW51cygpIHsKICAgICAgcmV0dXJuICh0aGlzLm1lbnVzIHx8IFtdKS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5oYXNCYWNrTG9naW4gPT0gIuaYryI7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMubWVudXMgPSBtZW51Lmxpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3Rlcih0YWJsZU5hbWUpIHsKICAgICAgdGhpcy4kc3RvcmFnZS5zZXQoImxvZ2luVGFibGUiLCB0YWJsZU5hbWUpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogIi9yZWdpc3RlciIKICAgICAgfSk7CiAgICB9LAogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAoIXRoaXMucnVsZXNGb3JtLnVzZXJuYW1lKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+36L6T5YWl55So5oi35ZCNIik7CiAgICAgIGlmICghdGhpcy5ydWxlc0Zvcm0ucGFzc3dvcmQpIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7fovpPlhaXlr4bnoIEiKTsKICAgICAgaWYgKCF0aGlzLnJ1bGVzRm9ybS5yb2xlKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+36YCJ5oup6KeS6ImyIik7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tZW51cy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLm1lbnVzW2ldLnJvbGVOYW1lID09IHRoaXMucnVsZXNGb3JtLnJvbGUpIHsKICAgICAgICAgIHRoaXMudGFibGVOYW1lID0gdGhpcy5tZW51c1tpXS50YWJsZU5hbWU7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgdXJsOiAiIi5jb25jYXQodGhpcy50YWJsZU5hbWUsICIvbG9naW4/dXNlcm5hbWU9IikuY29uY2F0KHRoaXMucnVsZXNGb3JtLnVzZXJuYW1lLCAiJnBhc3N3b3JkPSIpLmNvbmNhdCh0aGlzLnJ1bGVzRm9ybS5wYXNzd29yZCksCiAgICAgICAgbWV0aG9kOiAicG9zdCIKICAgICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwogICAgICAgIGlmIChkYXRhICYmIGRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgX3RoaXMuJHN0b3JhZ2Uuc2V0KCJUb2tlbiIsIGRhdGEudG9rZW4pOwogICAgICAgICAgX3RoaXMuJHN0b3JhZ2Uuc2V0KCJ1c2VySWQiLCBkYXRhLnVzZXJJZCk7CiAgICAgICAgICBfdGhpcy4kc3RvcmFnZS5zZXQoInJvbGUiLCBfdGhpcy5ydWxlc0Zvcm0ucm9sZSk7CiAgICAgICAgICBfdGhpcy4kc3RvcmFnZS5zZXQoInNlc3Npb25UYWJsZSIsIF90aGlzLnRhYmxlTmFtZSk7CiAgICAgICAgICBfdGhpcy4kc3RvcmFnZS5zZXQoImFkbWluTmFtZSIsIF90aGlzLnJ1bGVzRm9ybS51c2VybmFtZSk7CiAgICAgICAgICBfdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgICBwYXRoOiAiL2luZGV4LyIKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihkYXRhLm1zZyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["menu","data","rulesForm","username","password","role","menus","tableName","computed","backLoginMenus","filter","item","hasBackLogin","mounted","list","methods","register","$storage","set","$router","push","path","login","_this","$message","error","i","length","roleName","$http","url","concat","method","then","_ref","code","token","userId","replace","msg"],"sources":["src/views/login.vue"],"sourcesContent":["<template>\n  <div class=\"login-root\">\n    <div class=\"login-card\">\n      <div class=\"title\">\n        <div class=\"title-main\">图书管理系统</div>\n        <div class=\"title-sub\">请使用账号密码登录</div>\n      </div>\n\n      <el-form label-position=\"left\" label-width=\"0px\">\n        <el-form-item>\n          <el-input\n              placeholder=\"请输入用户名\"\n              v-model=\"rulesForm.username\"\n          />\n        </el-form-item>\n\n        <el-form-item>\n          <el-input\n              placeholder=\"请输入密码\"\n              type=\"password\"\n              v-model=\"rulesForm.password\"\n          />\n        </el-form-item>\n\n        <el-form-item>\n          <div class=\"role-label\">角色</div>\n          <div class=\"role-options\">\n            <el-radio\n                v-for=\"item in backLoginMenus\"\n                :key=\"item.roleName\"\n                v-model=\"rulesForm.role\"\n                :label=\"item.roleName\"\n            >\n              {{ item.roleName }}\n            </el-radio>\n          </div>\n        </el-form-item>\n\n        <el-button type=\"primary\" class=\"login-btn\" @click=\"login\">\n          登录\n        </el-button>\n\n        <div class=\"actions\">\n          <span class=\"link\" @click=\"register('yonghu')\">用户注册</span>\n        </div>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport menu from \"@/utils/menu\";\n\nexport default {\n  data() {\n    return {\n      rulesForm: {\n        username: \"\",\n        password: \"\",\n        role: \"\"\n      },\n      menus: [],\n      tableName: \"\"\n    };\n  },\n\n  computed: {\n    backLoginMenus() {\n      return (this.menus || []).filter(\n          item => item.hasBackLogin == \"是\"\n      );\n    }\n  },\n\n  mounted() {\n    this.menus = menu.list();\n  },\n\n  methods: {\n    register(tableName) {\n      this.$storage.set(\"loginTable\", tableName);\n      this.$router.push({ path: \"/register\" });\n    },\n\n    login() {\n      if (!this.rulesForm.username)\n        return this.$message.error(\"请输入用户名\");\n      if (!this.rulesForm.password)\n        return this.$message.error(\"请输入密码\");\n      if (!this.rulesForm.role)\n        return this.$message.error(\"请选择角色\");\n\n      for (let i = 0; i < this.menus.length; i++) {\n        if (this.menus[i].roleName == this.rulesForm.role) {\n          this.tableName = this.menus[i].tableName;\n          break;\n        }\n      }\n\n      this.$http({\n        url: `${this.tableName}/login?username=${this.rulesForm.username}&password=${this.rulesForm.password}`,\n        method: \"post\"\n      }).then(({ data }) => {\n        if (data && data.code === 0) {\n          this.$storage.set(\"Token\", data.token);\n          this.$storage.set(\"userId\", data.userId);\n          this.$storage.set(\"role\", this.rulesForm.role);\n          this.$storage.set(\"sessionTable\", this.tableName);\n          this.$storage.set(\"adminName\", this.rulesForm.username);\n          this.$router.replace({ path: \"/index/\" });\n        } else {\n          this.$message.error(data.msg);\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* 全屏强制覆盖 */\n.login-root {\n  position: fixed !important;\n  inset: 0 !important;\n  width: 100vw !important;\n  height: 100vh !important;\n  z-index: 999999 !important;\n\n  display: flex !important;\n  align-items: center !important;\n  justify-content: center !important;\n\n  background: #f5f6f8 !important;\n  box-sizing: border-box !important;\n  padding: 24px !important;\n}\n\n/* 登录卡片 */\n.login-card {\n  width: 380px;\n  max-width: 92vw;\n  background: #fff;\n  border-radius: 14px;\n  padding: 24px;\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.06);\n  box-sizing: border-box;\n}\n\n.title {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.title-main {\n  font-size: 20px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.title-sub {\n  font-size: 13px;\n  color: #6b7280;\n  margin-top: 6px;\n}\n\n.role-label {\n  font-size: 13px;\n  color: #6b7280;\n  margin-bottom: 6px;\n}\n\n.role-options {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.login-btn {\n  width: 100%;\n  margin-top: 10px;\n  height: 40px;\n  border-radius: 8px;\n}\n\n.actions {\n  margin-top: 12px;\n  text-align: center;\n}\n\n.link {\n  font-size: 13px;\n  color: #409eff;\n  cursor: pointer;\n}\n</style>"],"mappings":";;;;;;;;AAmDA,OAAAA,IAAA;AAEA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA;QACAC,QAAA;QACAC,QAAA;QACAC,IAAA;MACA;MACAC,KAAA;MACAC,SAAA;IACA;EACA;EAEAC,QAAA;IACAC,cAAA,WAAAA,eAAA;MACA,aAAAH,KAAA,QAAAI,MAAA,CACA,UAAAC,IAAA;QAAA,OAAAA,IAAA,CAAAC,YAAA;MAAA,CACA;IACA;EACA;EAEAC,OAAA,WAAAA,QAAA;IACA,KAAAP,KAAA,GAAAN,IAAA,CAAAc,IAAA;EACA;EAEAC,OAAA;IACAC,QAAA,WAAAA,SAAAT,SAAA;MACA,KAAAU,QAAA,CAAAC,GAAA,eAAAX,SAAA;MACA,KAAAY,OAAA,CAAAC,IAAA;QAAAC,IAAA;MAAA;IACA;IAEAC,KAAA,WAAAA,MAAA;MAAA,IAAAC,KAAA;MACA,UAAArB,SAAA,CAAAC,QAAA,EACA,YAAAqB,QAAA,CAAAC,KAAA;MACA,UAAAvB,SAAA,CAAAE,QAAA,EACA,YAAAoB,QAAA,CAAAC,KAAA;MACA,UAAAvB,SAAA,CAAAG,IAAA,EACA,YAAAmB,QAAA,CAAAC,KAAA;MAEA,SAAAC,CAAA,MAAAA,CAAA,QAAApB,KAAA,CAAAqB,MAAA,EAAAD,CAAA;QACA,SAAApB,KAAA,CAAAoB,CAAA,EAAAE,QAAA,SAAA1B,SAAA,CAAAG,IAAA;UACA,KAAAE,SAAA,QAAAD,KAAA,CAAAoB,CAAA,EAAAnB,SAAA;UACA;QACA;MACA;MAEA,KAAAsB,KAAA;QACAC,GAAA,KAAAC,MAAA,MAAAxB,SAAA,sBAAAwB,MAAA,MAAA7B,SAAA,CAAAC,QAAA,gBAAA4B,MAAA,MAAA7B,SAAA,CAAAE,QAAA;QACA4B,MAAA;MACA,GAAAC,IAAA,WAAAC,IAAA;QAAA,IAAAjC,IAAA,GAAAiC,IAAA,CAAAjC,IAAA;QACA,IAAAA,IAAA,IAAAA,IAAA,CAAAkC,IAAA;UACAZ,KAAA,CAAAN,QAAA,CAAAC,GAAA,UAAAjB,IAAA,CAAAmC,KAAA;UACAb,KAAA,CAAAN,QAAA,CAAAC,GAAA,WAAAjB,IAAA,CAAAoC,MAAA;UACAd,KAAA,CAAAN,QAAA,CAAAC,GAAA,SAAAK,KAAA,CAAArB,SAAA,CAAAG,IAAA;UACAkB,KAAA,CAAAN,QAAA,CAAAC,GAAA,iBAAAK,KAAA,CAAAhB,SAAA;UACAgB,KAAA,CAAAN,QAAA,CAAAC,GAAA,cAAAK,KAAA,CAAArB,SAAA,CAAAC,QAAA;UACAoB,KAAA,CAAAJ,OAAA,CAAAmB,OAAA;YAAAjB,IAAA;UAAA;QACA;UACAE,KAAA,CAAAC,QAAA,CAAAC,KAAA,CAAAxB,IAAA,CAAAsC,GAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}