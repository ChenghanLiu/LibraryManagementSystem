{"remainingRequest":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuchenghan/Desktop/LibraryManagementSystem/front/src/views/modules/tushu/list.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/src/views/modules/tushu/list.vue","mtime":1772219130647},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/cache-loader/dist/cjs.js","mtime":1772203478686},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/babel-loader/lib/index.js","mtime":1772203478957},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/cache-loader/dist/cjs.js","mtime":1772203478686},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/vue-loader/lib/index.js","mtime":1772203474026}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICBpbXBvcnQgQWRkT3JVcGRhdGUgZnJvbSAiLi4vZGljdGlvbmFyeVR1c2h1L2FkZC1vci11cGRhdGUudnVlIjsKICAgIGltcG9ydCBzdHlsZUpzIGZyb20gIi4uLy4uLy4uL3V0aWxzL3N0eWxlLmpzIjsKICAgIGltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvaHR0cCcKCiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewoKICAgICAgICAgICAgc2VhcmNoRm9ybTogewogICAgICAgICAgICAgICAga2V5OiAiIiwKICAgICAgICAgICAgICAgIHR1c2h1TmFtZTogIiIsCiAgICAgICAgICAgICAgICB0dXNodVR5cGVzOiAiIgogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXNzaW9uVGFibGUgOiAiIiwvL+eZu+W9lei0puaIt+aJgOWcqOihqOWQjQogICAgICAgICAgICByb2xlIDogIiIsLy/mnYPpmZAKICAgICAgICAgICAgdXNlcklkOiIiLC8v5b2T5YmN55m75b2V5Lq655qEaWQKCiAgICAgICAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAgICAgICBib3Jyb3dEYXlzOiAxLAogICAgICAgICAgICBjdXJyZW50Um93OiBudWxsLAogICAgLy/nuqfogZTooajkuIvmi4nmoYbmkJzntKLmnaHku7YKICAgIC8v5b2T5YmN6KGo5LiL5ouJ5qGG5pCc57Si5p2h5Lu2CiAgICAgICAgICAgICAgdHVzaHVUeXBlc1NlbGVjdFNlYXJjaCA6IFtdLAogICAgICAgICAgICBmb3JtOnsKICAgICAgICAgICAgICAgIGlkIDogbnVsbCwKICAgICAgICAgICAgICAgIHR1c2h1VXVpZE51bWJlciA6IG51bGwsCiAgICAgICAgICAgICAgICB0dXNodU5hbWUgOiBudWxsLAogICAgICAgICAgICAgICAgdHVzaHVUeXBlcyA6IG51bGwsCiAgICAgICAgICAgICAgICB0dXNodVBob3RvIDogbnVsbCwKICAgICAgICAgICAgICAgIHR1c2h1WnVvemhlIDogbnVsbCwKICAgICAgICAgICAgICAgIGNodWJhbnNoZVR5cGVzIDogbnVsbCwKICAgICAgICAgICAgICAgIHNodWppYVR5cGVzIDogbnVsbCwKICAgICAgICAgICAgICAgIHR1c2h1TnVtYmVyIDogbnVsbCwKICAgICAgICAgICAgICAgIHR1c2h1Q29udGVudCA6IG51bGwsCiAgICAgICAgICAgICAgICBpbnNlcnRUaW1lIDogbnVsbCwKICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWUgOiBudWxsLAogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhTGlzdDogW10sCiAgICAgICAgICAgIHBhZ2VJbmRleDogMSwKICAgICAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgICAgICB0b3RhbFBhZ2U6IDAsCiAgICAgICAgICAgIGRhdGFMaXN0TG9hZGluZzogZmFsc2UsCiAgICAgICAgICAgIGRhdGFMaXN0U2VsZWN0aW9uczogW10sCiAgICAgICAgICAgIHNob3dGbGFnOiB0cnVlLAogICAgICAgICAgICBzZnNoVmlzaWFibGU6IGZhbHNlLAogICAgICAgICAgICBzaEZvcm06IHt9LAogICAgICAgICAgICBjaGFydFZpc2lhYmxlOiBmYWxzZSwKICAgICAgICAgICAgZWNoYXJ0c0RhdGU6IG5ldyBEYXRlKCksLy9lY2hhcnRz55qE5pe26Ze05p+l6K+i5a2X5q61CiAgICAgICAgICAgIGFkZE9yVXBkYXRlRmxhZzpmYWxzZSwKICAgICAgICAgICAgY29udGVudHM6bnVsbCwKICAgICAgICAgICAgbGF5b3V0czogJycsCgogICAgICAgICAgICAvL+WvvOWHumV4Y2VsCiAgICAgICAgICAgIGpzb25fZmllbGRzOiB7CiAgICAgICAgICAgICAgICAvL+e6p+iBlOihqOWtl+autQogICAgICAgICAgICAgICAgLy/mnKzooajlrZfmrrUKICAgICAgICAgICAgICAgICAgICAgJ+WbvuS5pue8luWPtyc6ICJ0dXNodVV1aWROdW1iZXIiLAogICAgICAgICAgICAgICAgICAgICAn5Zu+5Lmm5qCH6aKYJzogInR1c2h1TmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICflm77kuabnsbvlnosnOiAidHVzaHVUeXBlcyIsCiAgICAgICAgICAgICAgICAgICAgICflm77kuablsIHpnaInOiAidHVzaHVQaG90byIsCiAgICAgICAgICAgICAgICAgICAgICflm77kuabkvZzogIUnOiAidHVzaHVadW96aGUiLAogICAgICAgICAgICAgICAgICAgICAn5Zu+5Lmm5Ye654mI56S+JzogImNodWJhbnNoZVR5cGVzIiwKICAgICAgICAgICAgICAgICAgICAgJ+aJgOWcqOS5puaetic6ICJzaHVqaWFUeXBlcyIsCiAgICAgICAgICAgICAgICAgICAgICflm77kuabmlbDph48nOiAidHVzaHVOdW1iZXIiLAogICAgICAgICAgICAgICAgICAgICAn5Y+R5biD5pe26Ze0JzogImluc2VydFRpbWUiLAogICAgICAgICAgICB9LAoKICAgICAgICAgICAgfTsKICAgICAgICB9LAogICAgICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgICAgIHRoaXMuY29udGVudHMgPSBzdHlsZUpzLmxpc3RTdHlsZSgpOwogICAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgICAgICAgICB0aGlzLmNvbnRlbnRTdHlsZUNoYW5nZSgpCiAgICAgICAgfSwKICAgICAgICBtb3VudGVkKCkgewogICAgICAgICAgICAvL+iOt+WPluW9k+WJjeeZu+W9leeUqOaIt+eahOS/oeaBrwogICAgICAgICAgICB0aGlzLnNlc3Npb25UYWJsZSA9IHRoaXMuJHN0b3JhZ2UuZ2V0KCJzZXNzaW9uVGFibGUiKTsKICAgICAgICAgICAgdGhpcy5yb2xlID0gdGhpcy4kc3RvcmFnZS5nZXQoInJvbGUiKTsKICAgICAgICAgICAgdGhpcy51c2VySWQgPSB0aGlzLiRzdG9yYWdlLmdldCgidXNlcklkIik7CgogICAgICAgIH0sCiAgICAgICAgZmlsdGVyczogewogICAgICAgICAgICBodG1sZmlsdGVyOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdmFsLnJlcGxhY2UoLzxbXj5dKj4vZykucmVwbGFjZSgvdW5kZWZpbmVkL2csJycpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjb21wb25lbnRzOiB7CiAgICAgICAgICAgIEFkZE9yVXBkYXRlLAogICAgICAgIH0sCiAgICAgICAgY29tcHV0ZWQ6IHsKICAgICAgICB9LAogICAgICAgIG1ldGhvZHM6IHsKICAgICAgICAgICAgY2hhcnREaWFsb2coKSB7CiAgICAgICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0IDoiJVkiLCAvLyVZLSVtCiAgICAgICAgICAgICAgICAgICAgcmlxaSA6X3RoaXMuZWNoYXJ0c0RhdGUuZ2V0RnVsbFllYXIoKSwKICAgICAgICAgICAgICAgICAgICB0aGlzVGFibGUgOiB7Ly/lvZPliY3ooagKICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVOYW1lIDoidHVzaHUiLC8v5b2T5YmN6KGo6KGo5ZCNLAogICAgICAgICAgICAgICAgICAgICAgICBzdW1Db2x1bSA6ICd0dXNodV9udW1iZXInLCAvL+axguWSjOWtl+autQogICAgICAgICAgICAgICAgICAgICAgICBkYXRlIDogJ2luc2VydF90aW1lJywvL+WIhue7hOaXpeacn+Wtl+autQogICAgICAgICAgICAgICAgICAgICAgICAvLyBzdHJpbmcgOiAndHVzaHVfbmFtZScsLy/liIbnu4TlrZfnrKbkuLLlrZfmrrUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHlwZXMgOiAndHVzaHVfdHlwZXMnLC8v5YiG57uE5LiL5ouJ5qGG5a2X5q61CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAvLyBqb2luVGFibGUgOiB7Ly/nuqfogZTooajvvIjlj6/ku6XkuI3lrZjlnKjvvIkKICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGFibGVOYW1lIDoieW9uZ2h1IiwvL+e6p+iBlOihqOihqOWQjQogICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyBkYXRlIDogJ2luc2VydF90aW1lJywvL+WIhue7hOaXpeacn+Wtl+autQogICAgICAgICAgICAgICAgICAgIC8vICAgICBzdHJpbmcgOiAneW9uZ2h1X25hbWUnLC8v5YiG57uE5a2X56ym5Liy5a2X5q61CiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIHR5cGVzIDogJ3lvbmdodV90eXBlcycsLy/liIbnu4TkuIvmi4nmoYblrZfmrrUKICAgICAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdGhpcy5jaGFydFZpc2lhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF90aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRpc3RpYyA9IHRoaXMuJGVjaGFydHMuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3RhdGlzdGljIiksICdtYWNhcm9ucycpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJGh0dHAoewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICJiYXJTdW0iLAogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKHtkYXRhfSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhICYmIGRhdGEuY29kZSA9PT0gMCl7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mn7Hnirblm74g5rGC5ZKMIOW3suaIkOWKn+S9v+eUqAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zdGFydAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHlBeGlzTmFtZSA9ICLmlbDlgLwiOy8v5qC55o2u5p+l6K+i5pWw5o2u5YW35L2T5pS5KOWNleWIl+imgeaUuSzlpJrliJfkuI3mlLkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeEF4aXNOYW1lID0gIuaciOS7vSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VyaWVzID0gW107Ly/lhbfkvZPmlbDmja7lgLwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS55QXhpcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLGluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBNYXAgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZW1wTWFwLm5hbWU9IFsi5pWw5YC8Il07Ly/moLnmja7mn6Xor6LmlbDmja7lhbfkvZPmlLko5Y2V5YiX6KaB5pS5LOWkmuWIl+S4jeaUuSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wTWFwLm5hbWU9ZGF0YS5kYXRhLmxlZ2VuZFtpbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcE1hcC50eXBlPSdiYXInOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBNYXAuZGF0YT1pdGVtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcy5wdXNoKHRlbXBNYXApOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdheGlzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXhpc1BvaW50ZXI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjcm9zcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcm9zc1N0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjOTk5JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYm94OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRhdGFWaWV3OiB7IHNob3c6IHRydWUsIHJlYWRPbmx5OiBmYWxzZSB9LCAgLy8g5pWw5o2u5p+l55yLCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWdpY1R5cGU6IHsgc2hvdzogdHJ1ZSwgdHlwZTogWydsaW5lJywgJ2JhciddIH0sLy/liIfmjaLlm77lvaLlsZXnpLrmlrnlvI8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc3RvcmU6IHsgc2hvdzogdHJ1ZSB9LCAvLyDliLfmlrAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVBc0ltYWdlOiB7IHNob3c6IHRydWUgfS8v5L+d5a2YCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZ2VuZDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLmRhdGEubGVnZW5kLy/moIfpopggIOWPr+S7peeCueWHu+WvvOiHtOafkOS4gOWIl+aVsOaNrua2iOWksQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeEF4aXM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHhBeGlzTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEuZGF0YS54QXhpcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aXNQb2ludGVyOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NoYWRvdycKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeUF4aXM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3ZhbHVlJywvL+S4jeiDveaUuQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogeUF4aXNOYW1lLC8veei9tOWNleS9jQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXhpc0xhYmVsOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyOiAne3ZhbHVlfScgLy8g5ZCO57yACiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllczpzZXJpZXMvL+WFt+S9k+aVsOaNrgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS9v+eUqOWImuaMh+WumueahOmFjee9rumhueWSjOaVsOaNruaYvuekuuWbvuihqOOAggogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGlzdGljLnNldE9wdGlvbihvcHRpb24sdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+agueaNrueql+WPo+eahOWkp+Wwj+WPmOWKqOWbvuihqAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpc3RpYy5yZXNpemUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2VuZAogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5oql6KGo5pyq5p+l6K+i5Yiw5pWw5o2uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDE1MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vLy/ppbznirblm74KICAgICAgICAgICAgICAgIC8vX3RoaXMuY2hhcnRWaXNpYWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAvLyB0aGlzLiRuZXh0VGljaygoKT0+ewogICAgICAgICAgICAgICAgLy8gICAgIHZhciBzdGF0aXN0aWMgPSB0aGlzLiRlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInN0YXRpc3RpYyIpLCdtYWNhcm9ucycpOwogICAgICAgICAgICAgICAgLy8gICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHRhYmxlTmFtZTogInR1c2h1IiwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgZ3JvdXBDb2x1bW46ICJ0dXNodV90eXBlcyIsCiAgICAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuJGh0dHAoewogICAgICAgICAgICAgICAgLy8gICAgICAgICB1cmw6ICJuZXdTZWxlY3RHcm91cENvdW50IiwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgcGFyYW1zOiBwYXJhbXMKICAgICAgICAgICAgICAgIC8vICAgICB9KS50aGVuKCh7ZGF0YX0pID0+IHsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBsZXQgcmVzID0gZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgbGV0IHhBeGlzID0gW107CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBsZXQgeUF4aXMgPSBbXTsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGxldCBwQXJyYXkgPSBbXQogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxyZXMubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgeEF4aXMucHVzaChyZXNbaV0ubmFtZSk7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgeUF4aXMucHVzaChyZXNbaV0udmFsdWUpOwogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHBBcnJheS5wdXNoKHsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc1tpXS52YWx1ZSwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbmFtZTogcmVzW2ldLm5hbWUKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSB7fTsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBvcHRpb24gPSB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAn5L+d6Zmp5ZCI5ZCM57G75Z6L57uf6K6hJywKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICdjZW50ZXInCiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdpdGVtJywKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogJ3tifSA6IHtjfSAoe2R9JSknCiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHNlcmllczogWwogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwaWUnLAogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl1czogJzU1JScsCiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyOiBbJzUwJScsICc2MCUnXSwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBwQXJyYXksCiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1waGFzaXM6IHsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVN0eWxlOiB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dCbHVyOiAxMCwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd09mZnNldFg6IDAsCiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dDb2xvcjogJ3JnYmEoMCwgMCwgMCwgMC41KScKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgc3RhdGlzdGljLnNldE9wdGlvbihvcHRpb24pOwogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHdpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBzdGF0aXN0aWMucmVzaXplKCk7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gICAgIH0pOwogICAgICAgICAgICAgICAgLy8gfSkKICAgICAgICAgICAgfSwKCgogICAgICAgICAgICBjb250ZW50U3R5bGVDaGFuZ2UoKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRTZWFyY2hTdHlsZUNoYW5nZSgpCiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRCdG5BZEFsbFN0eWxlQ2hhbmdlKCkKICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFNlYXJjaEJ0blN0eWxlQ2hhbmdlKCkKICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFRhYmxlQnRuU3R5bGVDaGFuZ2UoKQogICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UGFnZVN0eWxlQ2hhbmdlKCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29udGVudFNlYXJjaFN0eWxlQ2hhbmdlKCkgewogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtLWNvbnRlbnQgLnNsdCAuZWwtaW5wdXRfX2lubmVyJykuZm9yRWFjaChlbCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0QWxpZ24gPSAnbGVmdCcKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jb250ZW50cy5pbnB1dEZvbnRQb3NpdGlvbiA9PSAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduID0gJ2NlbnRlcicKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRzLmlucHV0Rm9udFBvc2l0aW9uID09IDMpIHRleHRBbGlnbiA9ICdyaWdodCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS50ZXh0QWxpZ24gPSB0ZXh0QWxpZ24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHRoaXMuY29udGVudHMuaW5wdXRIZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmxpbmVIZWlnaHQgPSB0aGlzLmNvbnRlbnRzLmlucHV0SGVpZ2h0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5jb2xvciA9IHRoaXMuY29udGVudHMuaW5wdXRGb250Q29sb3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmZvbnRTaXplID0gdGhpcy5jb250ZW50cy5pbnB1dEZvbnRTaXplCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJXaWR0aCA9IHRoaXMuY29udGVudHMuaW5wdXRCb3JkZXJXaWR0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuYm9yZGVyU3R5bGUgPSB0aGlzLmNvbnRlbnRzLmlucHV0Qm9yZGVyU3R5bGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJvcmRlckNvbG9yID0gdGhpcy5jb250ZW50cy5pbnB1dEJvcmRlckNvbG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSB0aGlzLmNvbnRlbnRzLmlucHV0Qm9yZGVyUmFkaXVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmNvbnRlbnRzLmlucHV0QmdDb2xvcgogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudHMuaW5wdXRUaXRsZSkgewogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1jb250ZW50IC5zbHQgLmVsLWZvcm0taXRlbV9fbGFiZWwnKS5mb3JFYWNoKGVsID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmNvbG9yID0gdGhpcy5jb250ZW50cy5pbnB1dFRpdGxlQ29sb3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmZvbnRTaXplID0gdGhpcy5jb250ZW50cy5pbnB1dFRpdGxlU2l6ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUubGluZUhlaWdodCA9IHRoaXMuY29udGVudHMuaW5wdXRIZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtLWNvbnRlbnQgLnNsdCAuZWwtaW5wdXRfX3ByZWZpeCcpLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuY29sb3IgPSB0aGlzLmNvbnRlbnRzLmlucHV0SWNvbkNvbG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5saW5lSGVpZ2h0ID0gdGhpcy5jb250ZW50cy5pbnB1dEhlaWdodAogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1jb250ZW50IC5zbHQgLmVsLWlucHV0X19zdWZmaXgnKS5mb3JFYWNoKGVsID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmNvbG9yID0gdGhpcy5jb250ZW50cy5pbnB1dEljb25Db2xvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUubGluZUhlaWdodCA9IHRoaXMuY29udGVudHMuaW5wdXRIZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tY29udGVudCAuc2x0IC5lbC1pbnB1dF9faWNvbicpLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUubGluZUhlaWdodCA9IHRoaXMuY29udGVudHMuaW5wdXRIZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9LCAxMCApCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8g5pCc57Si5oyJ6ZKuCiAgICAgICAgICAgIGNvbnRlbnRTZWFyY2hCdG5TdHlsZUNoYW5nZSgpIHsKICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1jb250ZW50IC5zbHQgLmVsLWJ1dHRvbi0tc3VjY2VzcycpLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSB0aGlzLmNvbnRlbnRzLnNlYXJjaEJ0bkhlaWdodAogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5jb2xvciA9IHRoaXMuY29udGVudHMuc2VhcmNoQnRuRm9udENvbG9yCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmZvbnRTaXplID0gdGhpcy5jb250ZW50cy5zZWFyY2hCdG5Gb250U2l6ZQogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJXaWR0aCA9IHRoaXMuY29udGVudHMuc2VhcmNoQnRuQm9yZGVyV2lkdGgKICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuYm9yZGVyU3R5bGUgPSB0aGlzLmNvbnRlbnRzLnNlYXJjaEJ0bkJvcmRlclN0eWxlCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJvcmRlckNvbG9yID0gdGhpcy5jb250ZW50cy5zZWFyY2hCdG5Cb3JkZXJDb2xvcgogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSB0aGlzLmNvbnRlbnRzLnNlYXJjaEJ0bkJvcmRlclJhZGl1cwogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmNvbnRlbnRzLnNlYXJjaEJ0bkJnQ29sb3IKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwKICAgICAgICAgIG9wZW5Cb3Jyb3cocm93KSB7CiAgICAgICAgICAgIHRoaXMuY3VycmVudFJvdyA9IHJvdwogICAgICAgICAgICB0aGlzLmJvcnJvd0RheXMgPSAxCiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgICAgICAgIH0sCgogICAgICAgICAgYXN5bmMgc3VibWl0Qm9ycm93KCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIC8vIOS9oCBkYXRhIOmHjOaciSB1c2VySWTvvIzov5nph4znm7TmjqXnlKjlroPvvJvmsqHmnInnmoTor53ku44gc2Vzc2lvblN0b3JhZ2Ug5Y+WCiAgICAgICAgICAgICAgY29uc3QgdXNlcklkID0gdGhpcy51c2VySWQgfHwgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIikKICAgICAgICAgICAgICBpZiAoIXVzZXJJZCkgewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5pyq6I635Y+W5Yiw55So5oi35L+h5oGv77yM6K+36YeN5paw55m75b2VIikKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudFJvdyB8fCAhdGhpcy5jdXJyZW50Um93LmlkKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmnKrpgInmi6nlm77kuaYiKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgcmVxdWVzdCh7CiAgICAgICAgICAgICAgICB1cmw6ICIvdHVzaHVqaWV5dWUvYWRkIiwKICAgICAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICB0dXNodUlkOiB0aGlzLmN1cnJlbnRSb3cuaWQsCiAgICAgICAgICAgICAgICAgIHlvbmdodUlkOiBOdW1iZXIodXNlcklkKSwKICAgICAgICAgICAgICAgICAgdHVzaHVqaWV5dWVTaGlqaWFuOiBOdW1iZXIodGhpcy5ib3Jyb3dEYXlzKSwKICAgICAgICAgICAgICAgICAgdHVzaHVqaWV5dWVUeXBlczogMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwLmRhdGEKICAgICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5YCf6ZiF5oiQ5YqfIikKICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAvLyDkvaDov5npobXojrflj5bliJfooajnmoTmlrnms5XlkI3lpKfmpoLnjoflj6sgZ2V0RGF0YUxpc3QKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5nZXREYXRhTGlzdCA9PT0gImZ1bmN0aW9uIikgdGhpcy5nZXREYXRhTGlzdCgpCiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdGhpcy5nZXRMaXN0ID09PSAiZnVuY3Rpb24iKSB0aGlzLmdldExpc3QoKQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKChkYXRhICYmIGRhdGEubXNnKSB8fCAi5YCf6ZiF5aSx6LSlIikKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlPy5yZXNwb25zZT8uZGF0YT8ubXNnIHx8IGU/Lm1lc3NhZ2UgfHwgIuWAn+mYheWksei0pSIpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOaWsOWinuOAgeaJuemHj+WIoOmZpAogICAgICAgICAgICBjb250ZW50QnRuQWRBbGxTdHlsZUNoYW5nZSgpIHsKICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1jb250ZW50IC5hZCAuZWwtYnV0dG9uLS1zdWNjZXNzJykuZm9yRWFjaChlbCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxIZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuY29sb3IgPSB0aGlzLmNvbnRlbnRzLmJ0bkFkQWxsQWRkRm9udENvbG9yCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmZvbnRTaXplID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEZvbnRTaXplCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJvcmRlcldpZHRoID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEJvcmRlcldpZHRoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJvcmRlclN0eWxlID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEJvcmRlclN0eWxlCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJvcmRlckNvbG9yID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEJvcmRlckNvbG9yCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJvcmRlclJhZGl1cyA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxCb3JkZXJSYWRpdXMKICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEFkZEJnQ29sb3IKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtLWNvbnRlbnQgLmFkIC5lbC1idXR0b24tLWRhbmdlcicpLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSB0aGlzLmNvbnRlbnRzLmJ0bkFkQWxsSGVpZ2h0CiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmNvbG9yID0gdGhpcy5jb250ZW50cy5idG5BZEFsbERlbEZvbnRDb2xvcgogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5mb250U2l6ZSA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxGb250U2l6ZQogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJXaWR0aCA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxCb3JkZXJXaWR0aAogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJTdHlsZSA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxCb3JkZXJTdHlsZQogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJDb2xvciA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxCb3JkZXJDb2xvcgogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSB0aGlzLmNvbnRlbnRzLmJ0bkFkQWxsQm9yZGVyUmFkaXVzCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxEZWxCZ0NvbG9yCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1jb250ZW50IC5hZCAuZWwtYnV0dG9uLS13YXJuaW5nJykuZm9yRWFjaChlbCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxIZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuY29sb3IgPSB0aGlzLmNvbnRlbnRzLmJ0bkFkQWxsV2FybkZvbnRDb2xvcgogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5mb250U2l6ZSA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxGb250U2l6ZQogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJXaWR0aCA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxCb3JkZXJXaWR0aAogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJTdHlsZSA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxCb3JkZXJTdHlsZQogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJDb2xvciA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxCb3JkZXJDb2xvcgogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSB0aGlzLmNvbnRlbnRzLmJ0bkFkQWxsQm9yZGVyUmFkaXVzCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxXYXJuQmdDb2xvcgogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDooajmoLwKICAgICAgICAgICAgcm93U3R5bGUoe3Jvdywgcm93SW5kZXh9KSB7CiAgICAgICAgICAgICAgICBpZiAocm93SW5kZXggJSAyID09IDEpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250ZW50cy50YWJsZVN0cmlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge2NvbG9yOiB0aGlzLmNvbnRlbnRzLnRhYmxlU3RyaXBlRm9udENvbG9yfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNlbGxTdHlsZSh7cm93LCByb3dJbmRleH0pIHsKICAgICAgICAgICAgICAgIGlmIChyb3dJbmRleCAlIDIgPT0gMSkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRzLnRhYmxlU3RyaXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7YmFja2dyb3VuZENvbG9yOiB0aGlzLmNvbnRlbnRzLnRhYmxlU3RyaXBlQmdDb2xvcn0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAnJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBoZWFkZXJSb3dTdHlsZSh7cm93LCByb3dJbmRleH0pIHsKICAgICAgICAgICAgICAgIHJldHVybiB7Y29sb3I6IHRoaXMuY29udGVudHMudGFibGVIZWFkZXJGb250Q29sb3J9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGhlYWRlckNlbGxTdHlsZSh7cm93LCByb3dJbmRleH0pIHsKICAgICAgICAgICAgICAgIHJldHVybiB7YmFja2dyb3VuZENvbG9yOiB0aGlzLmNvbnRlbnRzLnRhYmxlSGVhZGVyQmdDb2xvcn0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g6KGo5qC85oyJ6ZKuCiAgICAgICAgICAgIGNvbnRlbnRUYWJsZUJ0blN0eWxlQ2hhbmdlKCkgewogICAgICAgICAgICAgICAgLy8gdGhpcy4kbmV4dFRpY2soKCk9PnsKICAgICAgICAgICAgICAgIC8vICAgc2V0VGltZW91dCgoKT0+ewogICAgICAgICAgICAgICAgLy8gICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJsZS1jb250ZW50IC50YWJsZXMgLmVsLXRhYmxlX19ib2R5IC5lbC1idXR0b24tLXN1Y2Nlc3MnKS5mb3JFYWNoKGVsPT57CiAgICAgICAgICAgICAgICAvLyAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSB0aGlzLmNvbnRlbnRzLnRhYmxlQnRuSGVpZ2h0CiAgICAgICAgICAgICAgICAvLyAgICAgICBlbC5zdHlsZS5jb2xvciA9IHRoaXMuY29udGVudHMudGFibGVCdG5EZXRhaWxGb250Q29sb3IKICAgICAgICAgICAgICAgIC8vICAgICAgIGVsLnN0eWxlLmZvbnRTaXplID0gdGhpcy5jb250ZW50cy50YWJsZUJ0bkZvbnRTaXplCiAgICAgICAgICAgICAgICAvLyAgICAgICBlbC5zdHlsZS5ib3JkZXJXaWR0aCA9IHRoaXMuY29udGVudHMudGFibGVCdG5Cb3JkZXJXaWR0aAogICAgICAgICAgICAgICAgLy8gICAgICAgZWwuc3R5bGUuYm9yZGVyU3R5bGUgPSB0aGlzLmNvbnRlbnRzLnRhYmxlQnRuQm9yZGVyU3R5bGUKICAgICAgICAgICAgICAgIC8vICAgICAgIGVsLnN0eWxlLmJvcmRlckNvbG9yID0gdGhpcy5jb250ZW50cy50YWJsZUJ0bkJvcmRlckNvbG9yCiAgICAgICAgICAgICAgICAvLyAgICAgICBlbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSB0aGlzLmNvbnRlbnRzLnRhYmxlQnRuQm9yZGVyUmFkaXVzCiAgICAgICAgICAgICAgICAvLyAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmNvbnRlbnRzLnRhYmxlQnRuRGV0YWlsQmdDb2xvcgogICAgICAgICAgICAgICAgLy8gICAgIH0pCiAgICAgICAgICAgICAgICAvLyAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYmxlLWNvbnRlbnQgLnRhYmxlcyAuZWwtdGFibGVfX2JvZHkgLmVsLWJ1dHRvbi0tcHJpbWFyeScpLmZvckVhY2goZWw9PnsKICAgICAgICAgICAgICAgIC8vICAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHRoaXMuY29udGVudHMudGFibGVCdG5IZWlnaHQKICAgICAgICAgICAgICAgIC8vICAgICAgIGVsLnN0eWxlLmNvbG9yID0gdGhpcy5jb250ZW50cy50YWJsZUJ0bkVkaXRGb250Q29sb3IKICAgICAgICAgICAgICAgIC8vICAgICAgIGVsLnN0eWxlLmZvbnRTaXplID0gdGhpcy5jb250ZW50cy50YWJsZUJ0bkZvbnRTaXplCiAgICAgICAgICAgICAgICAvLyAgICAgICBlbC5zdHlsZS5ib3JkZXJXaWR0aCA9IHRoaXMuY29udGVudHMudGFibGVCdG5Cb3JkZXJXaWR0aAogICAgICAgICAgICAgICAgLy8gICAgICAgZWwuc3R5bGUuYm9yZGVyU3R5bGUgPSB0aGlzLmNvbnRlbnRzLnRhYmxlQnRuQm9yZGVyU3R5bGUKICAgICAgICAgICAgICAgIC8vICAgICAgIGVsLnN0eWxlLmJvcmRlckNvbG9yID0gdGhpcy5jb250ZW50cy50YWJsZUJ0bkJvcmRlckNvbG9yCiAgICAgICAgICAgICAgICAvLyAgICAgICBlbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSB0aGlzLmNvbnRlbnRzLnRhYmxlQnRuQm9yZGVyUmFkaXVzCiAgICAgICAgICAgICAgICAvLyAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmNvbnRlbnRzLnRhYmxlQnRuRWRpdEJnQ29sb3IKICAgICAgICAgICAgICAgIC8vICAgICB9KQogICAgICAgICAgICAgICAgLy8gICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJsZS1jb250ZW50IC50YWJsZXMgLmVsLXRhYmxlX19ib2R5IC5lbC1idXR0b24tLWRhbmdlcicpLmZvckVhY2goZWw9PnsKICAgICAgICAgICAgICAgIC8vICAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHRoaXMuY29udGVudHMudGFibGVCdG5IZWlnaHQKICAgICAgICAgICAgICAgIC8vICAgICAgIGVsLnN0eWxlLmNvbG9yID0gdGhpcy5jb250ZW50cy50YWJsZUJ0bkRlbEZvbnRDb2xvcgogICAgICAgICAgICAgICAgLy8gICAgICAgZWwuc3R5bGUuZm9udFNpemUgPSB0aGlzLmNvbnRlbnRzLnRhYmxlQnRuRm9udFNpemUKICAgICAgICAgICAgICAgIC8vICAgICAgIGVsLnN0eWxlLmJvcmRlcldpZHRoID0gdGhpcy5jb250ZW50cy50YWJsZUJ0bkJvcmRlcldpZHRoCiAgICAgICAgICAgICAgICAvLyAgICAgICBlbC5zdHlsZS5ib3JkZXJTdHlsZSA9IHRoaXMuY29udGVudHMudGFibGVCdG5Cb3JkZXJTdHlsZQogICAgICAgICAgICAgICAgLy8gICAgICAgZWwuc3R5bGUuYm9yZGVyQ29sb3IgPSB0aGlzLmNvbnRlbnRzLnRhYmxlQnRuQm9yZGVyQ29sb3IKICAgICAgICAgICAgICAgIC8vICAgICAgIGVsLnN0eWxlLmJvcmRlclJhZGl1cyA9IHRoaXMuY29udGVudHMudGFibGVCdG5Cb3JkZXJSYWRpdXMKICAgICAgICAgICAgICAgIC8vICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuY29udGVudHMudGFibGVCdG5EZWxCZ0NvbG9yCiAgICAgICAgICAgICAgICAvLyAgICAgfSkKCiAgICAgICAgICAgICAgICAvLyAgIH0sIDUwKQogICAgICAgICAgICAgICAgLy8gfSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5YiG6aG1CiAgICAgICAgICAgIGNvbnRlbnRQYWdlU3R5bGVDaGFuZ2UoKSB7CiAgICAgICAgICAgICAgICBsZXQgYXJyID0gW10KICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRzLnBhZ2VUb3RhbCkgYXJyLnB1c2goJ3RvdGFsJykKICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRzLnBhZ2VTaXplcykgYXJyLnB1c2goJ3NpemVzJykKICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRzLnBhZ2VQcmV2TmV4dCkgewogICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKCdwcmV2JykKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250ZW50cy5wYWdlUGFnZXIpIGFyci5wdXNoKCdwYWdlcicpCiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goJ25leHQnKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudHMucGFnZUp1bXBlcikgYXJyLnB1c2goJ2p1bXBlcicpCiAgICAgICAgICAgICAgICB0aGlzLmxheW91dHMgPSBhcnIuam9pbigpCiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRzLnBhZ2VFYWNoTnVtID0gMTAKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGluaXQoKSB7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlYXJjaCgpIHsKICAgICAgICAgICAgICAgIHRoaXMucGFnZUluZGV4ID0gMTsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g6I635Y+W5pWw5o2u5YiX6KGoCiAgICAgICAgICAgIGdldERhdGFMaXN0KCkgewogICAgICAgICAgICAgICAgdGhpcy5kYXRhTGlzdExvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgICBwYWdlOiB0aGlzLnBhZ2VJbmRleCwKICAgICAgICAgICAgICAgICAgICBsaW1pdDogdGhpcy5wYWdlU2l6ZSwKICAgICAgICAgICAgICAgICAgICBzb3J0OiAnaWQnLAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRm9ybS50dXNodU5hbWUhPSAnJyAmJiB0aGlzLnNlYXJjaEZvcm0udHVzaHVOYW1lIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyYW1zWyd0dXNodU5hbWUnXSA9ICclJyArIHRoaXMuc2VhcmNoRm9ybS50dXNodU5hbWUgKyAnJScKICAgICAgICAgICAgICAgIH0KICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hGb3JtLnR1c2h1VHlwZXMhPSAnJyAmJiB0aGlzLnNlYXJjaEZvcm0udHVzaHVUeXBlcyE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHBhcmFtc1sndHVzaHVUeXBlcyddID0gdGhpcy5zZWFyY2hGb3JtLnR1c2h1VHlwZXMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcGFyYW1zWyd0dXNodURlbGV0ZSddID0gMS8vIOmAu+i+keWIoOmZpOWtl+autSAxIOacquWIoOmZpCAyIOWIoOmZpAoKCiAgICAgICAgICAgICAgICB0aGlzLiRodHRwKHsKICAgICAgICAgICAgICAgICAgICB1cmw6ICJ0dXNodS9wYWdlIiwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgICAgICAgICAgICB9KS50aGVuKCh7ZGF0YX0pID0+IHsKICAgICAgICAgICAgICAgICAgICBpZihkYXRhICYmIGRhdGEuY29kZSA9PT0gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3QgPSBkYXRhLmRhdGEubGlzdDsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbFBhZ2UgPSBkYXRhLmRhdGEudG90YWw7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbFBhZ2UgPSAwOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy/mn6Xor6LnuqfogZTooajmkJzntKLmnaHku7bmiYDmnInliJfooagKICAgICAgICAgICAgICAgIC8v5p+l6K+i5b2T5YmN6KGo5pCc57Si5p2h5Lu25omA5pyJ5YiX6KGoCiAgICAgICAgICAgICAgICAvL+Whq+WFheS4i+aLieahhumAiemhuQogICAgICAgICAgICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgdXJsOiAiZGljdGlvbmFyeS9wYWdlP2RpY0NvZGU9dHVzaHVfdHlwZXMmcGFnZT0xJmxpbWl0PTEwMCIsCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgIH0pLnRoZW4oKHtkYXRhfSkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmKGRhdGEgJiYgZGF0YS5jb2RlID09PSAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50dXNodVR5cGVzU2VsZWN0U2VhcmNoID0gZGF0YS5kYXRhLmxpc3Q7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8v5q+P6aG15pWwCiAgICAgICAgICAgIHNpemVDaGFuZ2VIYW5kbGUodmFsKSB7CiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VTaXplID0gdmFsOwogICAgICAgICAgICAgICAgdGhpcy5wYWdlSW5kZXggPSAxOwogICAgICAgICAgICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDlvZPliY3pobUKICAgICAgICAgICAgY3VycmVudENoYW5nZUhhbmRsZSh2YWwpIHsKICAgICAgICAgICAgICAgIHRoaXMucGFnZUluZGV4ID0gdmFsOwogICAgICAgICAgICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDlpJrpgIkKICAgICAgICAgICAgc2VsZWN0aW9uQ2hhbmdlSGFuZGxlcih2YWwpIHsKICAgICAgICAgICAgICAgIHRoaXMuZGF0YUxpc3RTZWxlY3Rpb25zID0gdmFsOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDmt7vliqAv5L+u5pS5CiAgICAgICAgICAgIGFkZE9yVXBkYXRlSGFuZGxlcihpZCwgdHlwZSkgewogICAgICAgICAgICAgICAgdGhpcy5zaG93RmxhZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5hZGRPclVwZGF0ZUZsYWcgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5jcm9zc0FkZE9yVXBkYXRlRmxhZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKHR5cGUgIT0gJ2luZm8nKSB7CiAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICdlbHNlJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmFkZE9yVXBkYXRlLmluaXQoaWQsIHR5cGUpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOS4i+i9vQogICAgICAgICAgICBkb3dubG9hZChmaWxlKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cub3BlbigiICR7ZmlsZX0gIikKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5Yig6ZmkCiAgICAgICAgICAgIGRlbGV0ZUhhbmRsZXIoaWQpIHsKICAgICAgICAgICAgICAgIHZhciBpZHMgPSBpZCA/IFtOdW1iZXIoaWQpXSA6IHRoaXMuZGF0YUxpc3RTZWxlY3Rpb25zLm1hcChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyKGl0ZW0uaWQpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybShg56Gu5a6a6L+b6KGMWyR7aWQgPyAi5Yig6ZmkIiA6ICLmibnph4/liKDpmaQifV3mk43kvZw/YCwgIuaPkOekuiIsIHsKICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRodHRwKHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAidHVzaHUvZGVsZXRlIiwKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGlkcwogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKHtkYXRhfSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhICYmIGRhdGEuY29kZSA9PT0gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5pON5L2c5oiQ5YqfIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDE1MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZGF0YS5tc2cpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5a+85YWl5Yqf6IO95LiK5Lyg5paH5Lu25oiQ5Yqf5ZCO6LCD55So5a+85YWl5pa55rOVCiAgICAgICAgICAgIHR1c2h1VXBsb2FkU3VjY2VzcyhkYXRhKXsKICAgICAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgICAgICBfdGhpcy4kaHR0cCh7CiAgICAgICAgICAgICAgICAgICAgdXJsOiAidHVzaHUvYmF0Y2hJbnNlcnQ/ZmlsZU5hbWU9IiArIGRhdGEuZmlsZSwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiCiAgICAgICAgICAgICAgICB9KS50aGVuKCh7ZGF0YX0pID0+IHsKICAgICAgICAgICAgICAgICAgICBpZihkYXRhICYmIGRhdGEuY29kZSA9PT0gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLlr7zlhaXlm77kuabkv6Hmga/mlbDmja7miJDlip8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDE1MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2VhcmNoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihkYXRhLm1zZyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDlr7zlhaXlip/og73kuIrkvKDmlofku7blpLHotKXlkI7osIPnlKjlr7zlhaXmlrnms5UKICAgICAgICAgICAgdHVzaHVVcGxvYWRFcnJvcihkYXRhKXsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWksei0pScpOwogICAgICAgICAgICB9LAogICAgICAgIH0KICAgIH07Cg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";AAyOA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/modules/tushu","sourcesContent":["<template>\n    <div class=\"main-content\">\n\n        <!-- 条件查询 -->\n        <div v-if=\"showFlag\">\n            <el-form :inline=\"true\" :model=\"searchForm\" class=\"form-content\">\n                <el-row :gutter=\"20\" class=\"slt\" :style=\"{justifyContent:contents.searchBoxPosition=='1'?'flex-start':contents.searchBoxPosition=='2'?'center':'flex-end'}\">\n                         \n                     <el-form-item :label=\"contents.inputTitle == 1 ? '图书标题' : ''\">\n                         <el-input prefix-icon=\"el-icon-search\" v-model=\"searchForm.tushuName\" placeholder=\"图书标题\" clearable></el-input>\n                     </el-form-item>\n         \n                     <el-form-item :label=\"contents.inputTitle == 1 ? '图书类型' : ''\">\n                        <el-select v-model=\"searchForm.tushuTypes\" placeholder=\"请选择图书类型\">\n                            <el-option label=\"=-请选择-=\" value=\"\"></el-option>\n                            <el-option\n                               v-for=\"(item,index) in tushuTypesSelectSearch\"\n                               v-bind:key=\"index\"\n                               :label=\"item.indexName\"\n                               :value=\"item.codeIndex\">\n                            <!--lable是要展示的名称-->\n                            <!--value是值-->\n                            </el-option>\n                        </el-select>\n                     </el-form-item>\n\n                                                                \n\n\n                    <el-form-item>\n                        &nbsp;\n<a style=\"text-decoration:none\" class=\"el-button el-button--success\"\n                           v-if=\"isAuth('tushu','导入导出')\"\n                           icon=\"el-icon-download\"\n                           href=\"http://localhost:8080/tushuguanli/upload/tushuMuBan.xls\"\n                        >批量导入图书信息数据模板</a>\n                        &nbsp;\n                        <el-upload\n                                v-if=\"isAuth('tushu','导入导出')\"\n                                style=\"display: inline-block\"\n                                action=\"tushuguanli/file/upload\"\n                                :on-success=\"tushuUploadSuccess\"\n                                :on-error=\"tushuUploadError\"\n                                :show-file-list = false>\n                            <el-button\n                                    v-if=\"isAuth('tushu','导入导出')\"\n                                    type=\"success\"\n                                    icon=\"el-icon-upload2\"\n                            >批量导入图书信息数据</el-button>\n                        </el-upload>\n                        &nbsp;\n                        <!-- 导出excel -->\n                        <download-excel v-if=\"isAuth('tushu','导入导出')\" style=\"display: inline-block\" class = \"export-excel-wrapper\" :data = \"dataList\" :fields = \"json_fields\" name = \"tushu.xls\">\n                            <!-- 导出excel -->\n                            <el-button\n                                    type=\"success\"\n                                    icon=\"el-icon-download\"\n                            >导出</el-button>\n                        </download-excel>\n\n                        &nbsp;\n                    </el-form-item>\n                </el-row>\n            </el-form>\n            <div class=\"table-content\">\n                <el-table class=\"tables\" :size=\"contents.tableSize\" :show-header=\"contents.tableShowHeader\"\n                          :header-row-style=\"headerRowStyle\" :header-cell-style=\"headerCellStyle\"\n                          :border=\"contents.tableBorder\"\n                          :fit=\"contents.tableFit\"\n                          :stripe=\"contents.tableStripe\"\n                          :row-style=\"rowStyle\"\n                          :cell-style=\"cellStyle\"\n                          :style=\"{width: '100%',fontSize:contents.tableContentFontSize,color:contents.tableContentFontColor}\"\n                          v-if=\"isAuth('tushu','查看')\"\n                          :data=\"dataList\"\n                          v-loading=\"dataListLoading\"\n                          @selection-change=\"selectionChangeHandler\">\n                    <el-table-column  v-if=\"contents.tableSelection\"\n                                      type=\"selection\"\n                                      header-align=\"center\"\n                                      align=\"center\"\n                                      width=\"50\">\n                    </el-table-column>\n                    <el-table-column label=\"索引\" v-if=\"contents.tableIndex\" type=\"index\" width=\"50\" />\n\n                    <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                                   prop=\"tushuUuidNumber\"\n                                   header-align=\"center\"\n                                   label=\"图书编号\">\n                        <template slot-scope=\"scope\">\n                            {{scope.row.tushuUuidNumber}}\n                        </template>\n                    </el-table-column>\n\n                    <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                                   prop=\"tushuName\"\n                                   header-align=\"center\"\n                                   label=\"图书标题\">\n                        <template slot-scope=\"scope\">\n                            {{scope.row.tushuName}}\n                        </template>\n                    </el-table-column>\n                    <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                                      prop=\"tushuTypes\"\n                                      header-align=\"center\"\n                                      label=\"图书类型\">\n                        <template slot-scope=\"scope\">\n                            {{scope.row.tushuValue}}\n                        </template>\n                    </el-table-column>\n                    <el-table-column :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\" prop=\"tushuPhoto\"\n                                     header-align=\"center\"\n                                     width=\"200\"\n                                     label=\"图书封面\">\n                        <template slot-scope=\"scope\">\n                            <div v-if=\"scope.row.tushuPhoto\">\n                                <img :src=\"scope.row.tushuPhoto\" width=\"100\" height=\"100\">\n                            </div>\n                            <div v-else>无图片</div>\n                        </template>\n                    </el-table-column>\n\n                    <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                                   prop=\"tushuZuozhe\"\n                                   header-align=\"center\"\n                                   label=\"图书作者\">\n                        <template slot-scope=\"scope\">\n                            {{scope.row.tushuZuozhe}}\n                        </template>\n                    </el-table-column>\n                    <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                                      prop=\"chubansheTypes\"\n                                      header-align=\"center\"\n                                      label=\"图书出版社\">\n                        <template slot-scope=\"scope\">\n                            {{scope.row.chubansheValue}}\n                        </template>\n                    </el-table-column>\n                    <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                                      prop=\"shujiaTypes\"\n                                      header-align=\"center\"\n                                      label=\"所在书架\">\n                        <template slot-scope=\"scope\">\n                            {{scope.row.shujiaValue}}\n                        </template>\n                    </el-table-column>\n                    <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                                      prop=\"tushuNumber\"\n                                      header-align=\"center\"\n                                      label=\"图书数量\">\n                        <template slot-scope=\"scope\">\n                            {{scope.row.tushuNumber}}\n                        </template>\n                    </el-table-column>\n\n                    <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                                   prop=\"insertTime\"\n                                   header-align=\"center\"\n                                   label=\"发布时间\">\n                        <template slot-scope=\"scope\">\n                            {{scope.row.insertTime}}\n                        </template>\n                    </el-table-column>\n\n                    <el-table-column width=\"300\" :align=\"contents.tableAlign\"\n                                     header-align=\"center\"\n                                     label=\"操作\">\n                        <template slot-scope=\"scope\">\n                            <el-button v-if=\"isAuth('tushu','查看')\" type=\"success\" icon=\"el-icon-tickets\" size=\"mini\" @click=\"addOrUpdateHandler(scope.row.id,'info')\">详情</el-button>\n                            <el-button v-if=\"isAuth('tushu','修改')\" type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"addOrUpdateHandler(scope.row.id)\">修改</el-button>\n                            <el-button v-if=\"isAuth('tushu','删除')\" type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"deleteHandler(scope.row.id)\">删除</el-button>\n\n                            <el-button\n                                v-if=\"role==='用户'\"\n                                type=\"primary\"\n                                size=\"mini\"\n                                :disabled=\"Number(scope.row.tushuNumber) <= 0\"\n                                @click=\"openBorrow(scope.row)\"\n                            >借阅</el-button>\n\n                        </template>\n                    </el-table-column>\n                </el-table>\n                <el-pagination\n                        clsss=\"pages\"\n                        :layout=\"layouts\"\n                        @size-change=\"sizeChangeHandle\"\n                        @current-change=\"currentChangeHandle\"\n                        :current-page=\"pageIndex\"\n                        :page-sizes=\"[10, 20, 50, 100]\"\n                        :page-size=\"Number(contents.pageEachNum)\"\n                        :total=\"totalPage\"\n                        :small=\"contents.pageStyle\"\n                        class=\"pagination-content\"\n                        :background=\"contents.pageBtnBG\"\n                        :style=\"{textAlign:contents.pagePosition==1?'left':contents.pagePosition==2?'center':'right'}\"\n                ></el-pagination>\n\n            </div>\n        </div>\n        <!-- 添加/修改页面  将父组件的search方法传递给子组件-->\n        <add-or-update v-if=\"addOrUpdateFlag\" :parent=\"this\" ref=\"addOrUpdate\"></add-or-update>\n\n\n\n        <el-dialog title=\"统计报表\" :visible.sync=\"chartVisiable\" width=\"800\">\n            <el-date-picker\n                    v-model=\"echartsDate\"\n                    type=\"year\"\n                    placeholder=\"选择年\">\n            </el-date-picker>\n            <el-button @click=\"chartDialog()\">查询</el-button>\n            <div id=\"statistic\" style=\"width:100%;height:600px;\"></div>\n            <span slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"chartVisiable = false\">返回</el-button>\n\t\t\t</span>\n        </el-dialog>\n      <el-dialog title=\"借阅图书\" :visible.sync=\"dialogVisible\" width=\"30%\">\n        <el-form>\n          <el-form-item label=\"借阅天数\">\n            <el-input-number v-model=\"borrowDays\" :min=\"1\"/>\n          </el-form-item>\n        </el-form>\n\n        <span slot=\"footer\">\n          <el-button @click=\"dialogVisible=false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"submitBorrow\">确认借阅</el-button>\n        </span>\n      </el-dialog>\n\n    </div>\n</template>\n<script>\n    import AddOrUpdate from \"../dictionaryTushu/add-or-update.vue\";\n    import styleJs from \"../../../utils/style.js\";\n    import request from '@/utils/http'\n\n    export default {\n        data() {\n        return {\n\n            searchForm: {\n                key: \"\",\n                tushuName: \"\",\n                tushuTypes: \"\"\n            },\n            sessionTable : \"\",//登录账户所在表名\n            role : \"\",//权限\n            userId:\"\",//当前登录人的id\n\n            dialogVisible: false,\n            borrowDays: 1,\n            currentRow: null,\n    //级联表下拉框搜索条件\n    //当前表下拉框搜索条件\n              tushuTypesSelectSearch : [],\n            form:{\n                id : null,\n                tushuUuidNumber : null,\n                tushuName : null,\n                tushuTypes : null,\n                tushuPhoto : null,\n                tushuZuozhe : null,\n                chubansheTypes : null,\n                shujiaTypes : null,\n                tushuNumber : null,\n                tushuContent : null,\n                insertTime : null,\n                createTime : null,\n            },\n            dataList: [],\n            pageIndex: 1,\n            pageSize: 10,\n            totalPage: 0,\n            dataListLoading: false,\n            dataListSelections: [],\n            showFlag: true,\n            sfshVisiable: false,\n            shForm: {},\n            chartVisiable: false,\n            echartsDate: new Date(),//echarts的时间查询字段\n            addOrUpdateFlag:false,\n            contents:null,\n            layouts: '',\n\n            //导出excel\n            json_fields: {\n                //级联表字段\n                //本表字段\n                     '图书编号': \"tushuUuidNumber\",\n                     '图书标题': \"tushuName\",\n                     '图书类型': \"tushuTypes\",\n                     '图书封面': \"tushuPhoto\",\n                     '图书作者': \"tushuZuozhe\",\n                     '图书出版社': \"chubansheTypes\",\n                     '所在书架': \"shujiaTypes\",\n                     '图书数量': \"tushuNumber\",\n                     '发布时间': \"insertTime\",\n            },\n\n            };\n        },\n        created() {\n            this.contents = styleJs.listStyle();\n            this.init();\n            this.getDataList();\n            this.contentStyleChange()\n        },\n        mounted() {\n            //获取当前登录用户的信息\n            this.sessionTable = this.$storage.get(\"sessionTable\");\n            this.role = this.$storage.get(\"role\");\n            this.userId = this.$storage.get(\"userId\");\n\n        },\n        filters: {\n            htmlfilter: function (val) {\n                return val.replace(/<[^>]*>/g).replace(/undefined/g,'');\n            }\n        },\n        components: {\n            AddOrUpdate,\n        },\n        computed: {\n        },\n        methods: {\n            chartDialog() {\n                let _this = this;\n                let params = {\n                    dateFormat :\"%Y\", //%Y-%m\n                    riqi :_this.echartsDate.getFullYear(),\n                    thisTable : {//当前表\n                        tableName :\"tushu\",//当前表表名,\n                        sumColum : 'tushu_number', //求和字段\n                        date : 'insert_time',//分组日期字段\n                        // string : 'tushu_name',//分组字符串字段\n                        // types : 'tushu_types',//分组下拉框字段\n                    },\n                    // joinTable : {//级联表（可以不存在）\n                    //     tableName :\"yonghu\",//级联表表名\n                    //     // date : 'insert_time',//分组日期字段\n                    //     string : 'yonghu_name',//分组字符串字段\n                    //     // types : 'yonghu_types',//分组下拉框字段\n                    // }\n                }\n                _this.chartVisiable = true;\n                _this.$nextTick(() => {\n                    var statistic = this.$echarts.init(document.getElementById(\"statistic\"), 'macarons');\n                    this.$http({\n                        url: \"barSum\",\n                        method: \"get\",\n                        params: params\n                    }).then(({data}) => {\n                        if(data && data.code === 0){\n\n                            //柱状图 求和 已成功使用\n                            //start\n                            let yAxisName = \"数值\";//根据查询数据具体改(单列要改,多列不改)\n                            let xAxisName = \"月份\";\n                            let series = [];//具体数据值\n                            data.data.yAxis.forEach(function (item,index) {\n                                let tempMap = {};\n                                // tempMap.name= [\"数值\"];//根据查询数据具体改(单列要改,多列不改)\n                                tempMap.name=data.data.legend[index];\n                                tempMap.type='bar';\n                                tempMap.data=item;\n                                series.push(tempMap);\n\n                            })\n\n                            var option = {\n                                tooltip: {\n                                    trigger: 'axis',\n                                    axisPointer: {\n                                        type: 'cross',\n                                        crossStyle: {\n                                            color: '#999'\n                                        }\n                                    }\n                                },\n                                toolbox: {\n                                    feature: {\n                                        // dataView: { show: true, readOnly: false },  // 数据查看\n                                        magicType: { show: true, type: ['line', 'bar'] },//切换图形展示方式\n                                        // restore: { show: true }, // 刷新\n                                        saveAsImage: { show: true }//保存\n                                    }\n                                },\n                                legend: {\n                                    data: data.data.legend//标题  可以点击导致某一列数据消失\n                                },\n                                xAxis: [\n                                    {\n                                        type: 'category',\n                                        name: xAxisName,\n                                        data: data.data.xAxis,\n                                        axisPointer: {\n                                            type: 'shadow'\n                                        }\n                                    }\n                                ],\n                                yAxis: [\n                                    {\n                                        type: 'value',//不能改\n                                        name: yAxisName,//y轴单位\n                                        axisLabel: {\n                                            formatter: '{value}' // 后缀\n                                        }\n                                    }\n                                ],\n                                series:series//具体数据\n                            };\n                            // 使用刚指定的配置项和数据显示图表。\n                            statistic.setOption(option,true);\n                            //根据窗口的大小变动图表\n                            window.onresize = function () {\n                                statistic.resize();\n                            };\n                            //end\n                        }else {\n                            this.$message({\n                                message: \"报表未查询到数据\",\n                                type: \"success\",\n                                duration: 1500,\n                                onClose: () => {\n                                    this.search();\n                                }\n                            });\n                        }\n                    });\n                });\n                ////饼状图\n                //_this.chartVisiable = true;\n                // this.$nextTick(()=>{\n                //     var statistic = this.$echarts.init(document.getElementById(\"statistic\"),'macarons');\n                //     let params = {\n                //         tableName: \"tushu\",\n                //         groupColumn: \"tushu_types\",\n                //     }\n                //     this.$http({\n                //         url: \"newSelectGroupCount\",\n                //         method: \"get\",\n                //         params: params\n                //     }).then(({data}) => {\n                //         if (data && data.code === 0) {\n                //             let res = data.data;\n                //             let xAxis = [];\n                //             let yAxis = [];\n                //             let pArray = []\n                //             for(let i=0;i<res.length;i++){\n                //                 xAxis.push(res[i].name);\n                //                 yAxis.push(res[i].value);\n                //                 pArray.push({\n                //                     value: res[i].value,\n                //                     name: res[i].name\n                //                 })\n                //                 var option = {};\n                //                 option = {\n                //                     title: {\n                //                         text: '保险合同类型统计',\n                //                         left: 'center'\n                //                     },\n                //                     tooltip: {\n                //                         trigger: 'item',\n                //                         formatter: '{b} : {c} ({d}%)'\n                //                     },\n                //                     series: [\n                //                         {\n                //                             type: 'pie',\n                //                             radius: '55%',\n                //                             center: ['50%', '60%'],\n                //                             data: pArray,\n                //                             emphasis: {\n                //                                 itemStyle: {\n                //                                     shadowBlur: 10,\n                //                                     shadowOffsetX: 0,\n                //                                     shadowColor: 'rgba(0, 0, 0, 0.5)'\n                //                                 }\n                //                             }\n                //                         }\n                //                     ]\n                //                 };\n                //                 statistic.setOption(option);\n                //                 window.onresize = function() {\n                //                     statistic.resize();\n                //                 };\n                //             }\n                //         }\n                //     });\n                // })\n            },\n\n\n            contentStyleChange() {\n                this.contentSearchStyleChange()\n                this.contentBtnAdAllStyleChange()\n                this.contentSearchBtnStyleChange()\n                this.contentTableBtnStyleChange()\n                this.contentPageStyleChange()\n            },\n            contentSearchStyleChange() {\n                this.$nextTick(() => {\n                    document.querySelectorAll('.form-content .slt .el-input__inner').forEach(el => {\n                        let textAlign = 'left'\n                        if(this.contents.inputFontPosition == 2)\n                            textAlign = 'center'\n                            if (this.contents.inputFontPosition == 3) textAlign = 'right'\n                                el.style.textAlign = textAlign\n                            el.style.height = this.contents.inputHeight\n                            el.style.lineHeight = this.contents.inputHeight\n                            el.style.color = this.contents.inputFontColor\n                            el.style.fontSize = this.contents.inputFontSize\n                            el.style.borderWidth = this.contents.inputBorderWidth\n                            el.style.borderStyle = this.contents.inputBorderStyle\n                            el.style.borderColor = this.contents.inputBorderColor\n                            el.style.borderRadius = this.contents.inputBorderRadius\n                            el.style.backgroundColor = this.contents.inputBgColor\n                    })\n                    if (this.contents.inputTitle) {\n                        document.querySelectorAll('.form-content .slt .el-form-item__label').forEach(el => {\n                            el.style.color = this.contents.inputTitleColor\n                            el.style.fontSize = this.contents.inputTitleSize\n                            el.style.lineHeight = this.contents.inputHeight\n                        })\n                    }\n                    setTimeout(() => {\n                        document.querySelectorAll('.form-content .slt .el-input__prefix').forEach(el => {\n                            el.style.color = this.contents.inputIconColor\n                            el.style.lineHeight = this.contents.inputHeight\n                        })\n                        document.querySelectorAll('.form-content .slt .el-input__suffix').forEach(el => {\n                            el.style.color = this.contents.inputIconColor\n                            el.style.lineHeight = this.contents.inputHeight\n                        })\n                        document.querySelectorAll('.form-content .slt .el-input__icon').forEach(el => {\n                            el.style.lineHeight = this.contents.inputHeight\n                        })\n                    }, 10 )\n                })\n            },\n\n            // 搜索按钮\n            contentSearchBtnStyleChange() {\n                this.$nextTick(() => {\n                    document.querySelectorAll('.form-content .slt .el-button--success').forEach(el => {\n                        el.style.height = this.contents.searchBtnHeight\n                        el.style.color = this.contents.searchBtnFontColor\n                        el.style.fontSize = this.contents.searchBtnFontSize\n                        el.style.borderWidth = this.contents.searchBtnBorderWidth\n                        el.style.borderStyle = this.contents.searchBtnBorderStyle\n                        el.style.borderColor = this.contents.searchBtnBorderColor\n                        el.style.borderRadius = this.contents.searchBtnBorderRadius\n                        el.style.backgroundColor = this.contents.searchBtnBgColor\n                    })\n                })\n            },\n          openBorrow(row) {\n            this.currentRow = row\n            this.borrowDays = 1\n            this.dialogVisible = true\n          },\n\n          async submitBorrow() {\n            try {\n              // 你 data 里有 userId，这里直接用它；没有的话从 sessionStorage 取\n              const userId = this.userId || sessionStorage.getItem(\"userId\")\n              if (!userId) {\n                this.$message.error(\"未获取到用户信息，请重新登录\")\n                return\n              }\n              if (!this.currentRow || !this.currentRow.id) {\n                this.$message.error(\"未选择图书\")\n                return\n              }\n\n              const resp = await request({\n                url: \"/tushujieyue/add\",\n                method: \"post\",\n                data: {\n                  tushuId: this.currentRow.id,\n                  yonghuId: Number(userId),\n                  tushujieyueShijian: Number(this.borrowDays),\n                  tushujieyueTypes: 1\n                }\n              })\n\n              const data = resp.data\n              if (data && data.code === 0) {\n                this.$message.success(\"借阅成功\")\n                this.dialogVisible = false\n                // 你这页获取列表的方法名大概率叫 getDataList\n                if (typeof this.getDataList === \"function\") this.getDataList()\n                else if (typeof this.getList === \"function\") this.getList()\n              } else {\n                this.$message.error((data && data.msg) || \"借阅失败\")\n              }\n            } catch (e) {\n              console.error(e)\n              this.$message.error(e?.response?.data?.msg || e?.message || \"借阅失败\")\n            }\n          },\n            // 新增、批量删除\n            contentBtnAdAllStyleChange() {\n                this.$nextTick(() => {\n                    document.querySelectorAll('.form-content .ad .el-button--success').forEach(el => {\n                        el.style.height = this.contents.btnAdAllHeight\n                        el.style.color = this.contents.btnAdAllAddFontColor\n                        el.style.fontSize = this.contents.btnAdAllFontSize\n                        el.style.borderWidth = this.contents.btnAdAllBorderWidth\n                        el.style.borderStyle = this.contents.btnAdAllBorderStyle\n                        el.style.borderColor = this.contents.btnAdAllBorderColor\n                        el.style.borderRadius = this.contents.btnAdAllBorderRadius\n                        el.style.backgroundColor = this.contents.btnAdAllAddBgColor\n                    })\n                    document.querySelectorAll('.form-content .ad .el-button--danger').forEach(el => {\n                        el.style.height = this.contents.btnAdAllHeight\n                        el.style.color = this.contents.btnAdAllDelFontColor\n                        el.style.fontSize = this.contents.btnAdAllFontSize\n                        el.style.borderWidth = this.contents.btnAdAllBorderWidth\n                        el.style.borderStyle = this.contents.btnAdAllBorderStyle\n                        el.style.borderColor = this.contents.btnAdAllBorderColor\n                        el.style.borderRadius = this.contents.btnAdAllBorderRadius\n                        el.style.backgroundColor = this.contents.btnAdAllDelBgColor\n                    })\n                    document.querySelectorAll('.form-content .ad .el-button--warning').forEach(el => {\n                        el.style.height = this.contents.btnAdAllHeight\n                        el.style.color = this.contents.btnAdAllWarnFontColor\n                        el.style.fontSize = this.contents.btnAdAllFontSize\n                        el.style.borderWidth = this.contents.btnAdAllBorderWidth\n                        el.style.borderStyle = this.contents.btnAdAllBorderStyle\n                        el.style.borderColor = this.contents.btnAdAllBorderColor\n                        el.style.borderRadius = this.contents.btnAdAllBorderRadius\n                        el.style.backgroundColor = this.contents.btnAdAllWarnBgColor\n                    })\n                })\n            },\n            // 表格\n            rowStyle({row, rowIndex}) {\n                if (rowIndex % 2 == 1) {\n                    if (this.contents.tableStripe) {\n                        return {color: this.contents.tableStripeFontColor}\n                    }\n                } else {\n                    return ''\n                }\n            },\n            cellStyle({row, rowIndex}) {\n                if (rowIndex % 2 == 1) {\n                    if (this.contents.tableStripe) {\n                        return {backgroundColor: this.contents.tableStripeBgColor}\n                    }\n                } else {\n                    return ''\n                }\n            },\n            headerRowStyle({row, rowIndex}) {\n                return {color: this.contents.tableHeaderFontColor}\n            },\n            headerCellStyle({row, rowIndex}) {\n                return {backgroundColor: this.contents.tableHeaderBgColor}\n            },\n            // 表格按钮\n            contentTableBtnStyleChange() {\n                // this.$nextTick(()=>{\n                //   setTimeout(()=>{\n                //     document.querySelectorAll('.table-content .tables .el-table__body .el-button--success').forEach(el=>{\n                //       el.style.height = this.contents.tableBtnHeight\n                //       el.style.color = this.contents.tableBtnDetailFontColor\n                //       el.style.fontSize = this.contents.tableBtnFontSize\n                //       el.style.borderWidth = this.contents.tableBtnBorderWidth\n                //       el.style.borderStyle = this.contents.tableBtnBorderStyle\n                //       el.style.borderColor = this.contents.tableBtnBorderColor\n                //       el.style.borderRadius = this.contents.tableBtnBorderRadius\n                //       el.style.backgroundColor = this.contents.tableBtnDetailBgColor\n                //     })\n                //     document.querySelectorAll('.table-content .tables .el-table__body .el-button--primary').forEach(el=>{\n                //       el.style.height = this.contents.tableBtnHeight\n                //       el.style.color = this.contents.tableBtnEditFontColor\n                //       el.style.fontSize = this.contents.tableBtnFontSize\n                //       el.style.borderWidth = this.contents.tableBtnBorderWidth\n                //       el.style.borderStyle = this.contents.tableBtnBorderStyle\n                //       el.style.borderColor = this.contents.tableBtnBorderColor\n                //       el.style.borderRadius = this.contents.tableBtnBorderRadius\n                //       el.style.backgroundColor = this.contents.tableBtnEditBgColor\n                //     })\n                //     document.querySelectorAll('.table-content .tables .el-table__body .el-button--danger').forEach(el=>{\n                //       el.style.height = this.contents.tableBtnHeight\n                //       el.style.color = this.contents.tableBtnDelFontColor\n                //       el.style.fontSize = this.contents.tableBtnFontSize\n                //       el.style.borderWidth = this.contents.tableBtnBorderWidth\n                //       el.style.borderStyle = this.contents.tableBtnBorderStyle\n                //       el.style.borderColor = this.contents.tableBtnBorderColor\n                //       el.style.borderRadius = this.contents.tableBtnBorderRadius\n                //       el.style.backgroundColor = this.contents.tableBtnDelBgColor\n                //     })\n\n                //   }, 50)\n                // })\n            },\n            // 分页\n            contentPageStyleChange() {\n                let arr = []\n                if (this.contents.pageTotal) arr.push('total')\n                if (this.contents.pageSizes) arr.push('sizes')\n                if (this.contents.pagePrevNext) {\n                    arr.push('prev')\n                    if (this.contents.pagePager) arr.push('pager')\n                    arr.push('next')\n                }\n                if (this.contents.pageJumper) arr.push('jumper')\n                this.layouts = arr.join()\n                this.contents.pageEachNum = 10\n            },\n\n            init() {\n            },\n            search() {\n                this.pageIndex = 1;\n                this.getDataList();\n            },\n            // 获取数据列表\n            getDataList() {\n                this.dataListLoading = true;\n                let params = {\n                    page: this.pageIndex,\n                    limit: this.pageSize,\n                    sort: 'id',\n                }\n\n                         \n                if (this.searchForm.tushuName!= '' && this.searchForm.tushuName!= undefined) {\n                    params['tushuName'] = '%' + this.searchForm.tushuName + '%'\n                }\n         \n                if (this.searchForm.tushuTypes!= '' && this.searchForm.tushuTypes!= undefined) {\n                    params['tushuTypes'] = this.searchForm.tushuTypes\n                }\n                                                                \n                params['tushuDelete'] = 1// 逻辑删除字段 1 未删除 2 删除\n\n\n                this.$http({\n                    url: \"tushu/page\",\n                    method: \"get\",\n                    params: params\n                }).then(({data}) => {\n                    if(data && data.code === 0){\n                        this.dataList = data.data.list;\n                        this.totalPage = data.data.total;\n                    }else{\n                        this.dataList = [];\n                        this.totalPage = 0;\n                    }\n                    this.dataListLoading = false;\n                });\n\n                //查询级联表搜索条件所有列表\n                //查询当前表搜索条件所有列表\n                //填充下拉框选项\n                this.$http({\n                    url: \"dictionary/page?dicCode=tushu_types&page=1&limit=100\",\n                    method: \"get\",\n                }).then(({data}) => {\n                    if(data && data.code === 0){\n                        this.tushuTypesSelectSearch = data.data.list;\n                    }\n                });\n            },\n            //每页数\n            sizeChangeHandle(val) {\n                this.pageSize = val;\n                this.pageIndex = 1;\n                this.getDataList();\n            },\n            // 当前页\n            currentChangeHandle(val) {\n                this.pageIndex = val;\n                this.getDataList();\n            },\n            // 多选\n            selectionChangeHandler(val) {\n                this.dataListSelections = val;\n            },\n            // 添加/修改\n            addOrUpdateHandler(id, type) {\n                this.showFlag = false;\n                this.addOrUpdateFlag = true;\n                this.crossAddOrUpdateFlag = false;\n                if (type != 'info') {\n                    type = 'else';\n                }\n                this.$nextTick(() => {\n                    this.$refs.addOrUpdate.init(id, type);\n                });\n            },\n            // 下载\n            download(file) {\n                window.open(\" ${file} \")\n            },\n            // 删除\n            deleteHandler(id) {\n                var ids = id ? [Number(id)] : this.dataListSelections.map(item => {\n                    return Number(item.id);\n                });\n\n                this.$confirm(`确定进行[${id ? \"删除\" : \"批量删除\"}]操作?`, \"提示\", {\n                    confirmButtonText: \"确定\",\n                    cancelButtonText: \"取消\",\n                    type: \"warning\"\n                }).then(() => {\n                    this.$http({\n                        url: \"tushu/delete\",\n                        method: \"post\",\n                        data: ids\n                    }).then(({data}) => {\n                        if(data && data.code === 0){\n                            this.$message({\n                                message: \"操作成功\",\n                                type: \"success\",\n                                duration: 1500,\n                                onClose: () => {\n                                    this.search();\n                                }\n                            });\n                        }else{\n                            this.$message.error(data.msg);\n                        }\n                    });\n                });\n            },\n            // 导入功能上传文件成功后调用导入方法\n            tushuUploadSuccess(data){\n                let _this = this;\n                _this.$http({\n                    url: \"tushu/batchInsert?fileName=\" + data.file,\n                    method: \"get\"\n                }).then(({data}) => {\n                    if(data && data.code === 0){\n                        _this.$message({\n                            message: \"导入图书信息数据成功\",\n                            type: \"success\",\n                            duration: 1500,\n                            onClose: () => {\n                                _this.search();\n                            }\n                        });\n                    }else{\n                        _this.$message.error(data.msg);\n                    }\n                });\n\n            },\n            // 导入功能上传文件失败后调用导入方法\n            tushuUploadError(data){\n                this.$message.error('上传失败');\n            },\n        }\n    };\n</script>\n<style lang=\"scss\" scoped>\n.slt {\n    margin: 0 !important;\n    display: flex;\n  }\n\n  .ad {\n    margin: 0 !important;\n    display: flex;\n  }\n\n  .pages {\n    ::v-deep el-pagination__sizes{\n      ::v-deep el-input__inner {\n        height: 22px;\n        line-height: 22px;\n      }\n    }\n  }\n  \n\n  .el-button+.el-button {\n    margin:0;\n  } \n\n  .tables {\n\t::v-deep .el-button--success {\n\t\theight: 40px;\n\t\tcolor: rgba(88, 84, 84, 1);\n\t\tfont-size: 10px;\n\t\tborder-width: 1px;\n\t\tborder-style: solid;\n\t\tborder-color: #DCDFE6;\n\t\tborder-radius: 20px;\n\t\tbackground-color: rgba(153, 204, 51, 1);\n\t}\n\n\t::v-deep .el-button--primary {\n\t\theight: 40px;\n\t\tcolor: rgba(91, 87, 87, 1);\n\t\tfont-size: 10px;\n\t\tborder-width: 1px;\n\t\tborder-style: solid;\n\t\tborder-color: #DCDFE6;\n\t\tborder-radius: 20px;\n\t\tbackground-color: rgba(255, 255, 102, 1);\n\t}\n\n\t::v-deep .el-button--danger {\n\t\theight: 40px;\n\t\tcolor: rgba(255, 255, 255, 1);\n\t\tfont-size: 10px;\n\t\tborder-width: 1px;\n\t\tborder-style: solid;\n\t\tborder-color: #DCDFE6;\n\t\tborder-radius: 20px;\n\t\tbackground-color: rgba(51, 102, 0, 1);\n\t}\n\n    ::v-deep .el-button {\n      margin: 4px;\n    }\n  }\n</style>\n\n\n"]}]}