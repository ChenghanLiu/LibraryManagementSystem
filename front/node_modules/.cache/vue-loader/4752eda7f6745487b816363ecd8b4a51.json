{"remainingRequest":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuchenghan/Desktop/LibraryManagementSystem/front/src/views/modules/tushu/list.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/src/views/modules/tushu/list.vue","mtime":1772223407456},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/cache-loader/dist/cjs.js","mtime":1772203478686},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/babel-loader/lib/index.js","mtime":1772203478957},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/cache-loader/dist/cjs.js","mtime":1772203478686},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/vue-loader/lib/index.js","mtime":1772203474026}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBBZGRPclVwZGF0ZSBmcm9tICIuL2FkZC1vci11cGRhdGUiOwppbXBvcnQgc3R5bGVKcyBmcm9tICIuLi8uLi8uLi91dGlscy9zdHlsZS5qcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaEZvcm06IHsKICAgICAgICBrZXk6ICIiLAogICAgICAgIC8vIOKchSDkuI3mlLnljp/lip/og73vvIzlj6rmiorkvaDljp/mnKzpobXpnaLph4znlKjliLDnmoTlrZfmrrXooaXpvZDvvIjljp/mnaXmqKHmnb/ph4zlsLHnlKjkuoYgdHVzaHVOYW1lL3R1c2h1VHlwZXPvvIkKICAgICAgICB0dXNodU5hbWU6ICIiLAogICAgICAgIHR1c2h1VHlwZXM6ICIiCiAgICAgIH0sCiAgICAgIHNlc3Npb25UYWJsZSA6ICIiLC8v55m75b2V6LSm5oi35omA5Zyo6KGo5ZCNCiAgICAgIHJvbGUgOiAiIiwvL+adg+mZkAogICAgICB1c2VySWQ6IiIsLy/lvZPliY3nmbvlvZXkurrnmoRpZAoKICAgICAgLy8g4pyFIOaWsOWinu+8muWAn+mYheebuOWFs+eKtuaAge+8iOS4jeW9seWTjeWOn+WKn+iDve+8iQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgYm9ycm93RGF5czogMSwKICAgICAgY3VycmVudFJvdzogbnVsbCwKCiAgICAgIC8v57qn6IGU6KGo5LiL5ouJ5qGG5pCc57Si5p2h5Lu2CiAgICAgIC8v5b2T5YmN6KGo5LiL5ouJ5qGG5pCc57Si5p2h5Lu2CiAgICAgIHR1c2h1VHlwZXNTZWxlY3RTZWFyY2ggOiBbXSwKICAgICAgZm9ybTp7CiAgICAgICAgaWQgOiBudWxsLAogICAgICAgIHR1c2h1VXVpZE51bWJlciA6IG51bGwsCiAgICAgICAgdHVzaHVOYW1lIDogbnVsbCwKICAgICAgICB0dXNodVR5cGVzIDogbnVsbCwKICAgICAgICB0dXNodVBob3RvIDogbnVsbCwKICAgICAgICB0dXNodVp1b3poZSA6IG51bGwsCiAgICAgICAgY2h1YmFuc2hlVHlwZXMgOiBudWxsLAogICAgICAgIHNodWppYVR5cGVzIDogbnVsbCwKICAgICAgICB0dXNodU51bWJlciA6IG51bGwsCiAgICAgICAgdHVzaHVDb250ZW50IDogbnVsbCwKICAgICAgICBpbnNlcnRUaW1lIDogbnVsbCwKICAgICAgICBjcmVhdGVUaW1lIDogbnVsbCwKICAgICAgfSwKICAgICAgZGF0YUxpc3Q6IFtdLAogICAgICBwYWdlSW5kZXg6IDEsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgdG90YWxQYWdlOiAwLAogICAgICBkYXRhTGlzdExvYWRpbmc6IGZhbHNlLAogICAgICBkYXRhTGlzdFNlbGVjdGlvbnM6IFtdLAogICAgICBzaG93RmxhZzogdHJ1ZSwKICAgICAgc2ZzaFZpc2lhYmxlOiBmYWxzZSwKICAgICAgc2hGb3JtOiB7fSwKICAgICAgY2hhcnRWaXNpYWJsZTogZmFsc2UsCiAgICAgIGVjaGFydHNEYXRlOiBuZXcgRGF0ZSgpLC8vZWNoYXJ0c+eahOaXtumXtOafpeivouWtl+autQogICAgICBhZGRPclVwZGF0ZUZsYWc6ZmFsc2UsCiAgICAgIGNvbnRlbnRzOm51bGwsCiAgICAgIGxheW91dHM6ICcnLAoKICAgICAgLy/lr7zlh7pleGNlbAogICAgICBqc29uX2ZpZWxkczogewogICAgICAgICflm77kuabnvJblj7cnOiAidHVzaHVVdWlkTnVtYmVyIiwKICAgICAgICAn5Zu+5Lmm5qCH6aKYJzogInR1c2h1TmFtZSIsCiAgICAgICAgJ+WbvuS5puexu+Weiyc6ICJ0dXNodVR5cGVzIiwKICAgICAgICAn5Zu+5Lmm5bCB6Z2iJzogInR1c2h1UGhvdG8iLAogICAgICAgICflm77kuabkvZzogIUnOiAidHVzaHVadW96aGUiLAogICAgICAgICflm77kuablh7rniYjnpL4nOiAiY2h1YmFuc2hlVHlwZXMiLAogICAgICAgICfmiYDlnKjkuabmnrYnOiAic2h1amlhVHlwZXMiLAogICAgICAgICflm77kuabmlbDph48nOiAidHVzaHVOdW1iZXIiLAogICAgICAgICflj5HluIPml7bpl7QnOiAiaW5zZXJ0VGltZSIsCiAgICAgIH0sCgogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmNvbnRlbnRzID0gc3R5bGVKcy5saXN0U3R5bGUoKTsKICAgIHRoaXMuaW5pdCgpOwogICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgdGhpcy5jb250ZW50U3R5bGVDaGFuZ2UoKQogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8v6I635Y+W5b2T5YmN55m75b2V55So5oi355qE5L+h5oGvCiAgICB0aGlzLnNlc3Npb25UYWJsZSA9IHRoaXMuJHN0b3JhZ2UuZ2V0KCJzZXNzaW9uVGFibGUiKTsKICAgIHRoaXMucm9sZSA9IHRoaXMuJHN0b3JhZ2UuZ2V0KCJyb2xlIik7CiAgICB0aGlzLnVzZXJJZCA9IHRoaXMuJHN0b3JhZ2UuZ2V0KCJ1c2VySWQiKTsKCiAgfSwKICBmaWx0ZXJzOiB7CiAgICBodG1sZmlsdGVyOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiB2YWwucmVwbGFjZSgvPFtePl0qPi9nKS5yZXBsYWNlKC91bmRlZmluZWQvZywnJyk7CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBBZGRPclVwZGF0ZSwKICB9LAogIGNvbXB1dGVkOiB7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGFydERpYWxvZygpIHsKICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBkYXRlRm9ybWF0IDoiJVkiLCAvLyVZLSVtCiAgICAgICAgcmlxaSA6X3RoaXMuZWNoYXJ0c0RhdGUuZ2V0RnVsbFllYXIoKSwKICAgICAgICB0aGlzVGFibGUgOiB7Ly/lvZPliY3ooagKICAgICAgICAgIHRhYmxlTmFtZSA6InR1c2h1IiwvL+W9k+WJjeihqOihqOWQjSwKICAgICAgICAgIHN1bUNvbHVtIDogJ3R1c2h1X251bWJlcicsIC8v5rGC5ZKM5a2X5q61CiAgICAgICAgICBkYXRlIDogJ2luc2VydF90aW1lJywvL+WIhue7hOaXpeacn+Wtl+autQogICAgICAgIH0sCiAgICAgIH0KICAgICAgX3RoaXMuY2hhcnRWaXNpYWJsZSA9IHRydWU7CiAgICAgIF90aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdmFyIHN0YXRpc3RpYyA9IHRoaXMuJGVjaGFydHMuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3RhdGlzdGljIiksICdtYWNhcm9ucycpOwogICAgICAgIHRoaXMuJGh0dHAoewogICAgICAgICAgdXJsOiAiYmFyU3VtIiwKICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgIH0pLnRoZW4oKHtkYXRhfSkgPT4gewogICAgICAgICAgaWYoZGF0YSAmJiBkYXRhLmNvZGUgPT09IDApewogICAgICAgICAgICBsZXQgeUF4aXNOYW1lID0gIuaVsOWAvCI7CiAgICAgICAgICAgIGxldCB4QXhpc05hbWUgPSAi5pyI5Lu9IjsKICAgICAgICAgICAgbGV0IHNlcmllcyA9IFtdOwogICAgICAgICAgICBkYXRhLmRhdGEueUF4aXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSxpbmRleCkgewogICAgICAgICAgICAgIGxldCB0ZW1wTWFwID0ge307CiAgICAgICAgICAgICAgdGVtcE1hcC5uYW1lPWRhdGEuZGF0YS5sZWdlbmRbaW5kZXhdOwogICAgICAgICAgICAgIHRlbXBNYXAudHlwZT0nYmFyJzsKICAgICAgICAgICAgICB0ZW1wTWFwLmRhdGE9aXRlbTsKICAgICAgICAgICAgICBzZXJpZXMucHVzaCh0ZW1wTWFwKTsKICAgICAgICAgICAgfSkKCiAgICAgICAgICAgIHZhciBvcHRpb24gPSB7CiAgICAgICAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2F4aXMnLAogICAgICAgICAgICAgICAgYXhpc1BvaW50ZXI6IHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2Nyb3NzJywKICAgICAgICAgICAgICAgICAgY3Jvc3NTdHlsZTogeyBjb2xvcjogJyM5OTknIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHRvb2xib3g6IHsKICAgICAgICAgICAgICAgIGZlYXR1cmU6IHsKICAgICAgICAgICAgICAgICAgbWFnaWNUeXBlOiB7IHNob3c6IHRydWUsIHR5cGU6IFsnbGluZScsICdiYXInXSB9LAogICAgICAgICAgICAgICAgICBzYXZlQXNJbWFnZTogeyBzaG93OiB0cnVlIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGxlZ2VuZDogeyBkYXRhOiBkYXRhLmRhdGEubGVnZW5kIH0sCiAgICAgICAgICAgICAgeEF4aXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgICAgICAgICAgbmFtZTogeEF4aXNOYW1lLAogICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLmRhdGEueEF4aXMsCiAgICAgICAgICAgICAgICAgIGF4aXNQb2ludGVyOiB7IHR5cGU6ICdzaGFkb3cnIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIHlBeGlzOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICd2YWx1ZScsCiAgICAgICAgICAgICAgICAgIG5hbWU6IHlBeGlzTmFtZSwKICAgICAgICAgICAgICAgICAgYXhpc0xhYmVsOiB7IGZvcm1hdHRlcjogJ3t2YWx1ZX0nIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIHNlcmllczpzZXJpZXMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgc3RhdGlzdGljLnNldE9wdGlvbihvcHRpb24sdHJ1ZSk7CiAgICAgICAgICAgIHdpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBzdGF0aXN0aWMucmVzaXplKCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICLmiqXooajmnKrmn6Xor6LliLDmlbDmja4iLAogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMCwKICAgICAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKCiAgICBjb250ZW50U3R5bGVDaGFuZ2UoKSB7CiAgICAgIHRoaXMuY29udGVudFNlYXJjaFN0eWxlQ2hhbmdlKCkKICAgICAgdGhpcy5jb250ZW50QnRuQWRBbGxTdHlsZUNoYW5nZSgpCiAgICAgIHRoaXMuY29udGVudFNlYXJjaEJ0blN0eWxlQ2hhbmdlKCkKICAgICAgdGhpcy5jb250ZW50VGFibGVCdG5TdHlsZUNoYW5nZSgpCiAgICAgIHRoaXMuY29udGVudFBhZ2VTdHlsZUNoYW5nZSgpCiAgICB9LAogICAgY29udGVudFNlYXJjaFN0eWxlQ2hhbmdlKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tY29udGVudCAuc2x0IC5lbC1pbnB1dF9faW5uZXInKS5mb3JFYWNoKGVsID0+IHsKICAgICAgICAgIGxldCB0ZXh0QWxpZ24gPSAnbGVmdCcKICAgICAgICAgIGlmKHRoaXMuY29udGVudHMuaW5wdXRGb250UG9zaXRpb24gPT0gMikKICAgICAgICAgICAgdGV4dEFsaWduID0gJ2NlbnRlcicKICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRzLmlucHV0Rm9udFBvc2l0aW9uID09IDMpIHRleHRBbGlnbiA9ICdyaWdodCcKICAgICAgICAgIGVsLnN0eWxlLnRleHRBbGlnbiA9IHRleHRBbGlnbgogICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jb250ZW50cy5pbnB1dEhlaWdodAogICAgICAgICAgZWwuc3R5bGUubGluZUhlaWdodCA9IHRoaXMuY29udGVudHMuaW5wdXRIZWlnaHQKICAgICAgICAgIGVsLnN0eWxlLmNvbG9yID0gdGhpcy5jb250ZW50cy5pbnB1dEZvbnRDb2xvcgogICAgICAgICAgZWwuc3R5bGUuZm9udFNpemUgPSB0aGlzLmNvbnRlbnRzLmlucHV0Rm9udFNpemUKICAgICAgICAgIGVsLnN0eWxlLmJvcmRlcldpZHRoID0gdGhpcy5jb250ZW50cy5pbnB1dEJvcmRlcldpZHRoCiAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJTdHlsZSA9IHRoaXMuY29udGVudHMuaW5wdXRCb3JkZXJTdHlsZQogICAgICAgICAgZWwuc3R5bGUuYm9yZGVyQ29sb3IgPSB0aGlzLmNvbnRlbnRzLmlucHV0Qm9yZGVyQ29sb3IKICAgICAgICAgIGVsLnN0eWxlLmJvcmRlclJhZGl1cyA9IHRoaXMuY29udGVudHMuaW5wdXRCb3JkZXJSYWRpdXMKICAgICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuY29udGVudHMuaW5wdXRCZ0NvbG9yCiAgICAgICAgfSkKICAgICAgICBpZiAodGhpcy5jb250ZW50cy5pbnB1dFRpdGxlKSB7CiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1jb250ZW50IC5zbHQgLmVsLWZvcm0taXRlbV9fbGFiZWwnKS5mb3JFYWNoKGVsID0+IHsKICAgICAgICAgICAgZWwuc3R5bGUuY29sb3IgPSB0aGlzLmNvbnRlbnRzLmlucHV0VGl0bGVDb2xvcgogICAgICAgICAgICBlbC5zdHlsZS5mb250U2l6ZSA9IHRoaXMuY29udGVudHMuaW5wdXRUaXRsZVNpemUKICAgICAgICAgICAgZWwuc3R5bGUubGluZUhlaWdodCA9IHRoaXMuY29udGVudHMuaW5wdXRIZWlnaHQKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tY29udGVudCAuc2x0IC5lbC1pbnB1dF9fcHJlZml4JykuZm9yRWFjaChlbCA9PiB7CiAgICAgICAgICAgIGVsLnN0eWxlLmNvbG9yID0gdGhpcy5jb250ZW50cy5pbnB1dEljb25Db2xvcgogICAgICAgICAgICBlbC5zdHlsZS5saW5lSGVpZ2h0ID0gdGhpcy5jb250ZW50cy5pbnB1dEhlaWdodAogICAgICAgICAgfSkKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtLWNvbnRlbnQgLnNsdCAuZWwtaW5wdXRfX3N1ZmZpeCcpLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICBlbC5zdHlsZS5jb2xvciA9IHRoaXMuY29udGVudHMuaW5wdXRJY29uQ29sb3IKICAgICAgICAgICAgZWwuc3R5bGUubGluZUhlaWdodCA9IHRoaXMuY29udGVudHMuaW5wdXRIZWlnaHQKICAgICAgICAgIH0pCiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1jb250ZW50IC5zbHQgLmVsLWlucHV0X19pY29uJykuZm9yRWFjaChlbCA9PiB7CiAgICAgICAgICAgIGVsLnN0eWxlLmxpbmVIZWlnaHQgPSB0aGlzLmNvbnRlbnRzLmlucHV0SGVpZ2h0CiAgICAgICAgICB9KQogICAgICAgIH0sIDEwICkKICAgICAgfSkKICAgIH0sCiAgICAvLyDmkJzntKLmjInpkq4KICAgIGNvbnRlbnRTZWFyY2hCdG5TdHlsZUNoYW5nZSgpIHsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtLWNvbnRlbnQgLnNsdCAuZWwtYnV0dG9uLS1zdWNjZXNzJykuZm9yRWFjaChlbCA9PiB7CiAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSB0aGlzLmNvbnRlbnRzLnNlYXJjaEJ0bkhlaWdodAogICAgICAgICAgZWwuc3R5bGUuY29sb3IgPSB0aGlzLmNvbnRlbnRzLnNlYXJjaEJ0bkZvbnRDb2xvcgogICAgICAgICAgZWwuc3R5bGUuZm9udFNpemUgPSB0aGlzLmNvbnRlbnRzLnNlYXJjaEJ0bkZvbnRTaXplCiAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJXaWR0aCA9IHRoaXMuY29udGVudHMuc2VhcmNoQnRuQm9yZGVyV2lkdGgKICAgICAgICAgIGVsLnN0eWxlLmJvcmRlclN0eWxlID0gdGhpcy5jb250ZW50cy5zZWFyY2hCdG5Cb3JkZXJTdHlsZQogICAgICAgICAgZWwuc3R5bGUuYm9yZGVyQ29sb3IgPSB0aGlzLmNvbnRlbnRzLnNlYXJjaEJ0bkJvcmRlckNvbG9yCiAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSB0aGlzLmNvbnRlbnRzLnNlYXJjaEJ0bkJvcmRlclJhZGl1cwogICAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5jb250ZW50cy5zZWFyY2hCdG5CZ0NvbG9yCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICAvLyDmlrDlop7jgIHmibnph4/liKDpmaQKICAgIGNvbnRlbnRCdG5BZEFsbFN0eWxlQ2hhbmdlKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tY29udGVudCAuYWQgLmVsLWJ1dHRvbi0tc3VjY2VzcycpLmZvckVhY2goZWwgPT4gewogICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEhlaWdodAogICAgICAgICAgZWwuc3R5bGUuY29sb3IgPSB0aGlzLmNvbnRlbnRzLmJ0bkFkQWxsQWRkRm9udENvbG9yCiAgICAgICAgICBlbC5zdHlsZS5mb250U2l6ZSA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxGb250U2l6ZQogICAgICAgICAgZWwuc3R5bGUuYm9yZGVyV2lkdGggPSB0aGlzLmNvbnRlbnRzLmJ0bkFkQWxsQm9yZGVyV2lkdGgKICAgICAgICAgIGVsLnN0eWxlLmJvcmRlclN0eWxlID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEJvcmRlclN0eWxlCiAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJDb2xvciA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxCb3JkZXJDb2xvcgogICAgICAgICAgZWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEJvcmRlclJhZGl1cwogICAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEFkZEJnQ29sb3IKICAgICAgICB9KQogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtLWNvbnRlbnQgLmFkIC5lbC1idXR0b24tLWRhbmdlcicpLmZvckVhY2goZWwgPT4gewogICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEhlaWdodAogICAgICAgICAgZWwuc3R5bGUuY29sb3IgPSB0aGlzLmNvbnRlbnRzLmJ0bkFkQWxsRGVsRm9udENvbG9yCiAgICAgICAgICBlbC5zdHlsZS5mb250U2l6ZSA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxGb250U2l6ZQogICAgICAgICAgZWwuc3R5bGUuYm9yZGVyV2lkdGggPSB0aGlzLmNvbnRlbnRzLmJ0bkFkQWxsQm9yZGVyV2lkdGgKICAgICAgICAgIGVsLnN0eWxlLmJvcmRlclN0eWxlID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEJvcmRlclN0eWxlCiAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJDb2xvciA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxCb3JkZXJDb2xvcgogICAgICAgICAgZWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEJvcmRlclJhZGl1cwogICAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5jb250ZW50cy5idG5BZEFsbERlbEJnQ29sb3IKICAgICAgICB9KQogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtLWNvbnRlbnQgLmFkIC5lbC1idXR0b24tLXdhcm5pbmcnKS5mb3JFYWNoKGVsID0+IHsKICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxIZWlnaHQKICAgICAgICAgIGVsLnN0eWxlLmNvbG9yID0gdGhpcy5jb250ZW50cy5idG5BZEFsbFdhcm5Gb250Q29sb3IKICAgICAgICAgIGVsLnN0eWxlLmZvbnRTaXplID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEZvbnRTaXplCiAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJXaWR0aCA9IHRoaXMuY29udGVudHMuYnRuQWRBbGxCb3JkZXJXaWR0aAogICAgICAgICAgZWwuc3R5bGUuYm9yZGVyU3R5bGUgPSB0aGlzLmNvbnRlbnRzLmJ0bkFkQWxsQm9yZGVyU3R5bGUKICAgICAgICAgIGVsLnN0eWxlLmJvcmRlckNvbG9yID0gdGhpcy5jb250ZW50cy5idG5BZEFsbEJvcmRlckNvbG9yCiAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSB0aGlzLmNvbnRlbnRzLmJ0bkFkQWxsQm9yZGVyUmFkaXVzCiAgICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmNvbnRlbnRzLmJ0bkFkQWxsV2FybkJnQ29sb3IKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIC8vIOihqOagvAogICAgcm93U3R5bGUoe3Jvdywgcm93SW5kZXh9KSB7CiAgICAgIGlmIChyb3dJbmRleCAlIDIgPT0gMSkgewogICAgICAgIGlmICh0aGlzLmNvbnRlbnRzLnRhYmxlU3RyaXBlKSB7CiAgICAgICAgICByZXR1cm4ge2NvbG9yOiB0aGlzLmNvbnRlbnRzLnRhYmxlU3RyaXBlRm9udENvbG9yfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJycKICAgICAgfQogICAgfSwKICAgIGNlbGxTdHlsZSh7cm93LCByb3dJbmRleH0pIHsKICAgICAgaWYgKHJvd0luZGV4ICUgMiA9PSAxKSB7CiAgICAgICAgaWYgKHRoaXMuY29udGVudHMudGFibGVTdHJpcGUpIHsKICAgICAgICAgIHJldHVybiB7YmFja2dyb3VuZENvbG9yOiB0aGlzLmNvbnRlbnRzLnRhYmxlU3RyaXBlQmdDb2xvcn0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICcnCiAgICAgIH0KICAgIH0sCiAgICBoZWFkZXJSb3dTdHlsZSh7cm93LCByb3dJbmRleH0pIHsKICAgICAgcmV0dXJuIHtjb2xvcjogdGhpcy5jb250ZW50cy50YWJsZUhlYWRlckZvbnRDb2xvcn0KICAgIH0sCiAgICBoZWFkZXJDZWxsU3R5bGUoe3Jvdywgcm93SW5kZXh9KSB7CiAgICAgIHJldHVybiB7YmFja2dyb3VuZENvbG9yOiB0aGlzLmNvbnRlbnRzLnRhYmxlSGVhZGVyQmdDb2xvcn0KICAgIH0sCiAgICAvLyDooajmoLzmjInpkq4KICAgIGNvbnRlbnRUYWJsZUJ0blN0eWxlQ2hhbmdlKCkgewogICAgfSwKICAgIC8vIOWIhumhtQogICAgY29udGVudFBhZ2VTdHlsZUNoYW5nZSgpIHsKICAgICAgbGV0IGFyciA9IFtdCiAgICAgIGlmICh0aGlzLmNvbnRlbnRzLnBhZ2VUb3RhbCkgYXJyLnB1c2goJ3RvdGFsJykKICAgICAgaWYgKHRoaXMuY29udGVudHMucGFnZVNpemVzKSBhcnIucHVzaCgnc2l6ZXMnKQogICAgICBpZiAodGhpcy5jb250ZW50cy5wYWdlUHJldk5leHQpIHsKICAgICAgICBhcnIucHVzaCgncHJldicpCiAgICAgICAgaWYgKHRoaXMuY29udGVudHMucGFnZVBhZ2VyKSBhcnIucHVzaCgncGFnZXInKQogICAgICAgIGFyci5wdXNoKCduZXh0JykKICAgICAgfQogICAgICBpZiAodGhpcy5jb250ZW50cy5wYWdlSnVtcGVyKSBhcnIucHVzaCgnanVtcGVyJykKICAgICAgdGhpcy5sYXlvdXRzID0gYXJyLmpvaW4oKQogICAgICB0aGlzLmNvbnRlbnRzLnBhZ2VFYWNoTnVtID0gMTAKICAgIH0sCgogICAgaW5pdCgpIHsKICAgIH0sCiAgICBzZWFyY2goKSB7CiAgICAgIHRoaXMucGFnZUluZGV4ID0gMTsKICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgfSwKICAgIC8vIOiOt+WPluaVsOaNruWIl+ihqAogICAgZ2V0RGF0YUxpc3QoKSB7CiAgICAgIHRoaXMuZGF0YUxpc3RMb2FkaW5nID0gdHJ1ZTsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBwYWdlOiB0aGlzLnBhZ2VJbmRleCwKICAgICAgICBsaW1pdDogdGhpcy5wYWdlU2l6ZSwKICAgICAgICBzb3J0OiAnaWQnLAogICAgICB9CgogICAgICBpZiAodGhpcy5zZWFyY2hGb3JtLnR1c2h1TmFtZSE9ICcnICYmIHRoaXMuc2VhcmNoRm9ybS50dXNodU5hbWUhPSB1bmRlZmluZWQpIHsKICAgICAgICBwYXJhbXNbJ3R1c2h1TmFtZSddID0gJyUnICsgdGhpcy5zZWFyY2hGb3JtLnR1c2h1TmFtZSArICclJwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWFyY2hGb3JtLnR1c2h1VHlwZXMhPSAnJyAmJiB0aGlzLnNlYXJjaEZvcm0udHVzaHVUeXBlcyE9IHVuZGVmaW5lZCkgewogICAgICAgIHBhcmFtc1sndHVzaHVUeXBlcyddID0gdGhpcy5zZWFyY2hGb3JtLnR1c2h1VHlwZXMKICAgICAgfQoKICAgICAgcGFyYW1zWyd0dXNodURlbGV0ZSddID0gMS8vIOmAu+i+keWIoOmZpOWtl+autSAxIOacquWIoOmZpCAyIOWIoOmZpAoKICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgdXJsOiAidHVzaHUvcGFnZSIsCiAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICB9KS50aGVuKCh7ZGF0YX0pID0+IHsKICAgICAgICBpZihkYXRhICYmIGRhdGEuY29kZSA9PT0gMCl7CiAgICAgICAgICB0aGlzLmRhdGFMaXN0ID0gZGF0YS5kYXRhLmxpc3Q7CiAgICAgICAgICB0aGlzLnRvdGFsUGFnZSA9IGRhdGEuZGF0YS50b3RhbDsKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHRoaXMuZGF0YUxpc3QgPSBbXTsKICAgICAgICAgIHRoaXMudG90YWxQYWdlID0gMDsKICAgICAgICB9CiAgICAgICAgdGhpcy5kYXRhTGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CgogICAgICB0aGlzLiRodHRwKHsKICAgICAgICB1cmw6ICJkaWN0aW9uYXJ5L3BhZ2U/ZGljQ29kZT10dXNodV90eXBlcyZwYWdlPTEmbGltaXQ9MTAwIiwKICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICB9KS50aGVuKCh7ZGF0YX0pID0+IHsKICAgICAgICBpZihkYXRhICYmIGRhdGEuY29kZSA9PT0gMCl7CiAgICAgICAgICB0aGlzLnR1c2h1VHlwZXNTZWxlY3RTZWFyY2ggPSBkYXRhLmRhdGEubGlzdDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5q+P6aG15pWwCiAgICBzaXplQ2hhbmdlSGFuZGxlKHZhbCkgewogICAgICB0aGlzLnBhZ2VTaXplID0gdmFsOwogICAgICB0aGlzLnBhZ2VJbmRleCA9IDE7CiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICAgIH0sCiAgICAvLyDlvZPliY3pobUKICAgIGN1cnJlbnRDaGFuZ2VIYW5kbGUodmFsKSB7CiAgICAgIHRoaXMucGFnZUluZGV4ID0gdmFsOwogICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICB9LAogICAgLy8g5aSa6YCJCiAgICBzZWxlY3Rpb25DaGFuZ2VIYW5kbGVyKHZhbCkgewogICAgICB0aGlzLmRhdGFMaXN0U2VsZWN0aW9ucyA9IHZhbDsKICAgIH0sCiAgICAvLyDmt7vliqAv5L+u5pS5CiAgICBhZGRPclVwZGF0ZUhhbmRsZXIoaWQsIHR5cGUpIHsKICAgICAgdGhpcy5zaG93RmxhZyA9IGZhbHNlOwogICAgICB0aGlzLmFkZE9yVXBkYXRlRmxhZyA9IHRydWU7CiAgICAgIHRoaXMuY3Jvc3NBZGRPclVwZGF0ZUZsYWcgPSBmYWxzZTsKICAgICAgaWYgKHR5cGUgIT0gJ2luZm8nKSB7CiAgICAgICAgdHlwZSA9ICdlbHNlJzsKICAgICAgfQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy5hZGRPclVwZGF0ZS5pbml0KGlkLCB0eXBlKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5LiL6L29CiAgICBkb3dubG9hZChmaWxlKSB7CiAgICAgIHdpbmRvdy5vcGVuKCIgJHtmaWxlfSAiKQogICAgfSwKICAgIC8vIOWIoOmZpAogICAgZGVsZXRlSGFuZGxlcihpZCkgewogICAgICB2YXIgaWRzID0gaWQgPyBbTnVtYmVyKGlkKV0gOiB0aGlzLmRhdGFMaXN0U2VsZWN0aW9ucy5tYXAoaXRlbSA9PiB7CiAgICAgICAgcmV0dXJuIE51bWJlcihpdGVtLmlkKTsKICAgICAgfSk7CgogICAgICB0aGlzLiRjb25maXJtKGDnoa7lrprov5vooYxbJHtpZCA/ICLliKDpmaQiIDogIuaJuemHj+WIoOmZpCJ9XeaTjeS9nD9gLCAi5o+Q56S6IiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgICB1cmw6ICJ0dXNodS9kZWxldGUiLAogICAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgICBkYXRhOiBpZHMKICAgICAgICB9KS50aGVuKCh7ZGF0YX0pID0+IHsKICAgICAgICAgIGlmKGRhdGEgJiYgZGF0YS5jb2RlID09PSAwKXsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogIuaTjeS9nOaIkOWKnyIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAxNTAwLAogICAgICAgICAgICAgIG9uQ2xvc2U6ICgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGRhdGEubXNnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5a+85YWl5Yqf6IO95LiK5Lyg5paH5Lu25oiQ5Yqf5ZCO6LCD55So5a+85YWl5pa55rOVCiAgICB0dXNodVVwbG9hZFN1Y2Nlc3MoZGF0YSl7CiAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLiRodHRwKHsKICAgICAgICB1cmw6ICJ0dXNodS9iYXRjaEluc2VydD9maWxlTmFtZT0iICsgZGF0YS5maWxlLAogICAgICAgIG1ldGhvZDogImdldCIKICAgICAgfSkudGhlbigoe2RhdGF9KSA9PiB7CiAgICAgICAgaWYoZGF0YSAmJiBkYXRhLmNvZGUgPT09IDApewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAi5a+85YWl5Zu+5Lmm5L+h5oGv5pWw5o2u5oiQ5YqfIiwKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBkdXJhdGlvbjogMTUwMCwKICAgICAgICAgICAgb25DbG9zZTogKCkgPT4gewogICAgICAgICAgICAgIF90aGlzLnNlYXJjaCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKGRhdGEubXNnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWvvOWFpeWKn+iDveS4iuS8oOaWh+S7tuWksei0peWQjuiwg+eUqOWvvOWFpeaWueazlQogICAgdHVzaHVVcGxvYWRFcnJvcihkYXRhKXsKICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aSx6LSlJyk7CiAgICB9LAoKICAgIC8vIOKchSDmlrDlop7vvJrmiZPlvIDlgJ/pmIXlvLnnqpcKICAgIG9wZW5Cb3Jyb3cocm93KSB7CiAgICAgIHRoaXMuY3VycmVudFJvdyA9IHJvdwogICAgICB0aGlzLmJvcnJvd0RheXMgPSAxCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgIH0sCgogICAgLy8g4pyFIOaWsOWinu+8muaPkOS6pOWAn+mYhe+8iOWPqueUqCAkaHR0cO+8jOS4jeW8leWFpeaWsOS+nei1lu+8jOS4jeWKqOWOn+aOpeWPo+mjjuagvO+8iQogICAgc3VibWl0Qm9ycm93KCkgewogICAgICBjb25zdCB1c2VySWQgPSB0aGlzLnVzZXJJZCB8fCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKQogICAgICBpZiAoIXVzZXJJZCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuacquiOt+WPluWIsOeUqOaIt+S/oeaBr++8jOivt+mHjeaWsOeZu+W9lSIpCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmN1cnJlbnRSb3cgfHwgIXRoaXMuY3VycmVudFJvdy5pZCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuacqumAieaLqeWbvuS5piIpCiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHRoaXMuJGh0dHAoewogICAgICAgIHVybDogInR1c2h1amlleXVlL2FkZCIsCiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgZGF0YTogewogICAgICAgICAgdHVzaHVJZDogdGhpcy5jdXJyZW50Um93LmlkLAogICAgICAgICAgeW9uZ2h1SWQ6IE51bWJlcih1c2VySWQpLAogICAgICAgICAgdHVzaHVqaWV5dWVTaGlqaWFuOiBOdW1iZXIodGhpcy5ib3Jyb3dEYXlzKSwKICAgICAgICAgIHR1c2h1amlleXVlVHlwZXM6IDEKICAgICAgICB9CiAgICAgIH0pLnRoZW4oKHtkYXRhfSkgPT4gewogICAgICAgIGlmIChkYXRhICYmIGRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLlgJ/pmIXmiJDlip8iKQogICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKSAvLyDliLfmlrDlupPlrZgKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigoZGF0YSAmJiBkYXRhLm1zZykgfHwgIuWAn+mYheWksei0pSIpCiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoZSkgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSkKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGU/LnJlc3BvbnNlPy5kYXRhPy5tc2cgfHwgZT8ubWVzc2FnZSB8fCAi5YCf6ZiF5aSx6LSlIikKICAgICAgfSkKICAgIH0sCgogIH0KfTsK"},{"version":3,"sources":["list.vue"],"names":[],"mappings":";AAuQA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"list.vue","sourceRoot":"src/views/modules/tushu","sourcesContent":["<template>\n  <div class=\"main-content\">\n\n    <!-- 条件查询 -->\n    <div v-if=\"showFlag\">\n      <el-form :inline=\"true\" :model=\"searchForm\" class=\"form-content\">\n        <el-row :gutter=\"20\" class=\"slt\" :style=\"{justifyContent:contents.searchBoxPosition=='1'?'flex-start':contents.searchBoxPosition=='2'?'center':'flex-end'}\">\n\n          <el-form-item :label=\"contents.inputTitle == 1 ? '图书标题' : ''\">\n            <el-input prefix-icon=\"el-icon-search\" v-model=\"searchForm.tushuName\" placeholder=\"图书标题\" clearable></el-input>\n          </el-form-item>\n\n          <el-form-item :label=\"contents.inputTitle == 1 ? '图书类型' : ''\">\n            <el-select v-model=\"searchForm.tushuTypes\" placeholder=\"请选择图书类型\">\n              <el-option label=\"=-请选择-=\" value=\"\"></el-option>\n              <el-option\n                  v-for=\"(item,index) in tushuTypesSelectSearch\"\n                  v-bind:key=\"index\"\n                  :label=\"item.indexName\"\n                  :value=\"item.codeIndex\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n\n          <el-form-item>\n            <el-button type=\"success\" @click=\"search()\">查询<i class=\"el-icon-search el-icon--right\"/></el-button>\n          </el-form-item>\n        </el-row>\n\n        <el-row class=\"ad\" :style=\"{justifyContent:contents.btnAdAllBoxPosition=='1'?'flex-start':contents.btnAdAllBoxPosition=='2'?'center':'flex-end'}\">\n          <el-form-item>\n            <el-button\n                v-if=\"isAuth('tushu','新增')\"\n                type=\"success\"\n                icon=\"el-icon-plus\"\n                @click=\"addOrUpdateHandler()\"\n            >新增</el-button>\n            &nbsp;\n            <el-button\n                v-if=\"isAuth('tushu','删除')\"\n                :disabled=\"dataListSelections.length <= 0\"\n                type=\"danger\"\n                icon=\"el-icon-delete\"\n                @click=\"deleteHandler()\"\n            >删除</el-button>\n            &nbsp;\n            <el-button\n                v-if=\"isAuth('tushu','报表')\"\n                type=\"success\"\n                icon=\"el-icon-pie-chart\"\n                @click=\"chartDialog()\"\n            >报表</el-button>\n            &nbsp;\n            <a style=\"text-decoration:none\" class=\"el-button el-button--success\"\n               v-if=\"isAuth('tushu','导入导出')\"\n               icon=\"el-icon-download\"\n               href=\"http://localhost:8080/tushuguanli/upload/tushuMuBan.xls\"\n            >批量导入图书信息数据模板</a>\n            &nbsp;\n            <el-upload\n                v-if=\"isAuth('tushu','导入导出')\"\n                style=\"display: inline-block\"\n                action=\"tushuguanli/file/upload\"\n                :on-success=\"tushuUploadSuccess\"\n                :on-error=\"tushuUploadError\"\n                :show-file-list = false>\n              <el-button\n                  v-if=\"isAuth('tushu','导入导出')\"\n                  type=\"success\"\n                  icon=\"el-icon-upload2\"\n              >批量导入图书信息数据</el-button>\n            </el-upload>\n            &nbsp;\n            <!-- 导出excel -->\n            <download-excel v-if=\"isAuth('tushu','导入导出')\" style=\"display: inline-block\" class = \"export-excel-wrapper\" :data = \"dataList\" :fields = \"json_fields\" name = \"tushu.xls\">\n              <el-button\n                  type=\"success\"\n                  icon=\"el-icon-download\"\n              >导出</el-button>\n            </download-excel>\n            &nbsp;\n          </el-form-item>\n        </el-row>\n      </el-form>\n\n      <div class=\"table-content\">\n        <el-table class=\"tables\" :size=\"contents.tableSize\" :show-header=\"contents.tableShowHeader\"\n                  :header-row-style=\"headerRowStyle\" :header-cell-style=\"headerCellStyle\"\n                  :border=\"contents.tableBorder\"\n                  :fit=\"contents.tableFit\"\n                  :stripe=\"contents.tableStripe\"\n                  :row-style=\"rowStyle\"\n                  :cell-style=\"cellStyle\"\n                  :style=\"{width: '100%',fontSize:contents.tableContentFontSize,color:contents.tableContentFontColor}\"\n                  v-if=\"isAuth('tushu','查看')\"\n                  :data=\"dataList\"\n                  v-loading=\"dataListLoading\"\n                  @selection-change=\"selectionChangeHandler\">\n          <el-table-column  v-if=\"contents.tableSelection\"\n                            type=\"selection\"\n                            header-align=\"center\"\n                            align=\"center\"\n                            width=\"50\">\n          </el-table-column>\n          <el-table-column label=\"索引\" v-if=\"contents.tableIndex\" type=\"index\" width=\"50\" />\n\n          <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                            prop=\"tushuUuidNumber\"\n                            header-align=\"center\"\n                            label=\"图书编号\">\n            <template slot-scope=\"scope\">\n              {{scope.row.tushuUuidNumber}}\n            </template>\n          </el-table-column>\n\n          <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                            prop=\"tushuName\"\n                            header-align=\"center\"\n                            label=\"图书标题\">\n            <template slot-scope=\"scope\">\n              {{scope.row.tushuName}}\n            </template>\n          </el-table-column>\n\n          <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                            prop=\"tushuTypes\"\n                            header-align=\"center\"\n                            label=\"图书类型\">\n            <template slot-scope=\"scope\">\n              {{scope.row.tushuValue}}\n            </template>\n          </el-table-column>\n\n          <el-table-column :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\" prop=\"tushuPhoto\"\n                           header-align=\"center\"\n                           width=\"200\"\n                           label=\"图书封面\">\n            <template slot-scope=\"scope\">\n              <div v-if=\"scope.row.tushuPhoto\">\n                <img :src=\"scope.row.tushuPhoto\" width=\"100\" height=\"100\">\n              </div>\n              <div v-else>无图片</div>\n            </template>\n          </el-table-column>\n\n          <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                            prop=\"tushuZuozhe\"\n                            header-align=\"center\"\n                            label=\"图书作者\">\n            <template slot-scope=\"scope\">\n              {{scope.row.tushuZuozhe}}\n            </template>\n          </el-table-column>\n\n          <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                            prop=\"chubansheTypes\"\n                            header-align=\"center\"\n                            label=\"图书出版社\">\n            <template slot-scope=\"scope\">\n              {{scope.row.chubansheValue}}\n            </template>\n          </el-table-column>\n\n          <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                            prop=\"shujiaTypes\"\n                            header-align=\"center\"\n                            label=\"所在书架\">\n            <template slot-scope=\"scope\">\n              {{scope.row.shujiaValue}}\n            </template>\n          </el-table-column>\n\n          <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                            prop=\"tushuNumber\"\n                            header-align=\"center\"\n                            label=\"图书数量\">\n            <template slot-scope=\"scope\">\n              {{scope.row.tushuNumber}}\n            </template>\n          </el-table-column>\n\n          <el-table-column  :sortable=\"contents.tableSortable\" :align=\"contents.tableAlign\"\n                            prop=\"insertTime\"\n                            header-align=\"center\"\n                            label=\"发布时间\">\n            <template slot-scope=\"scope\">\n              {{scope.row.insertTime}}\n            </template>\n          </el-table-column>\n\n          <el-table-column width=\"300\" :align=\"contents.tableAlign\"\n                           header-align=\"center\"\n                           label=\"操作\">\n            <template slot-scope=\"scope\">\n              <el-button v-if=\"isAuth('tushu','查看')\" type=\"success\" icon=\"el-icon-tickets\" size=\"mini\" @click=\"addOrUpdateHandler(scope.row.id,'info')\">详情</el-button>\n              <el-button v-if=\"isAuth('tushu','修改')\" type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"addOrUpdateHandler(scope.row.id)\">修改</el-button>\n              <el-button v-if=\"isAuth('tushu','删除')\" type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"deleteHandler(scope.row.id)\">删除</el-button>\n\n              <!-- ✅ 新增：借阅（只给“用户”显示；不影响管理员原按钮） -->\n              <el-button\n                  v-if=\"role === '用户'\"\n                  type=\"primary\"\n                  size=\"mini\"\n                  :disabled=\"Number(scope.row.tushuNumber) <= 0\"\n                  @click=\"openBorrow(scope.row)\"\n              >借阅</el-button>\n\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <el-pagination\n            clsss=\"pages\"\n            :layout=\"layouts\"\n            @size-change=\"sizeChangeHandle\"\n            @current-change=\"currentChangeHandle\"\n            :current-page=\"pageIndex\"\n            :page-sizes=\"[10, 20, 50, 100]\"\n            :page-size=\"Number(contents.pageEachNum)\"\n            :total=\"totalPage\"\n            :small=\"contents.pageStyle\"\n            class=\"pagination-content\"\n            :background=\"contents.pageBtnBG\"\n            :style=\"{textAlign:contents.pagePosition==1?'left':contents.pagePosition==2?'center':'right'}\"\n        ></el-pagination>\n\n      </div>\n    </div>\n\n    <!-- 添加/修改页面  将父组件的search方法传递给子组件-->\n    <add-or-update v-if=\"addOrUpdateFlag\" :parent=\"this\" ref=\"addOrUpdate\"></add-or-update>\n\n    <el-dialog title=\"统计报表\" :visible.sync=\"chartVisiable\" width=\"800\">\n      <el-date-picker\n          v-model=\"echartsDate\"\n          type=\"year\"\n          placeholder=\"选择年\">\n      </el-date-picker>\n      <el-button @click=\"chartDialog()\">查询</el-button>\n      <div id=\"statistic\" style=\"width:100%;height:600px;\"></div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"chartVisiable = false\">返回</el-button>\n\t\t\t</span>\n    </el-dialog>\n\n    <!-- ✅ 新增：借阅弹窗（完全独立，不影响原逻辑） -->\n    <el-dialog title=\"借阅图书\" :visible.sync=\"dialogVisible\" width=\"30%\">\n      <el-form>\n        <el-form-item label=\"借阅天数\">\n          <el-input-number v-model=\"borrowDays\" :min=\"1\"/>\n        </el-form-item>\n      </el-form>\n\n      <span slot=\"footer\">\n                <el-button @click=\"dialogVisible=false\">取消</el-button>\n                <el-button type=\"primary\" @click=\"submitBorrow\">确认借阅</el-button>\n            </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport AddOrUpdate from \"./add-or-update\";\nimport styleJs from \"../../../utils/style.js\";\n\nexport default {\n  data() {\n    return {\n      searchForm: {\n        key: \"\",\n        // ✅ 不改原功能，只把你原本页面里用到的字段补齐（原来模板里就用了 tushuName/tushuTypes）\n        tushuName: \"\",\n        tushuTypes: \"\"\n      },\n      sessionTable : \"\",//登录账户所在表名\n      role : \"\",//权限\n      userId:\"\",//当前登录人的id\n\n      // ✅ 新增：借阅相关状态（不影响原功能）\n      dialogVisible: false,\n      borrowDays: 1,\n      currentRow: null,\n\n      //级联表下拉框搜索条件\n      //当前表下拉框搜索条件\n      tushuTypesSelectSearch : [],\n      form:{\n        id : null,\n        tushuUuidNumber : null,\n        tushuName : null,\n        tushuTypes : null,\n        tushuPhoto : null,\n        tushuZuozhe : null,\n        chubansheTypes : null,\n        shujiaTypes : null,\n        tushuNumber : null,\n        tushuContent : null,\n        insertTime : null,\n        createTime : null,\n      },\n      dataList: [],\n      pageIndex: 1,\n      pageSize: 10,\n      totalPage: 0,\n      dataListLoading: false,\n      dataListSelections: [],\n      showFlag: true,\n      sfshVisiable: false,\n      shForm: {},\n      chartVisiable: false,\n      echartsDate: new Date(),//echarts的时间查询字段\n      addOrUpdateFlag:false,\n      contents:null,\n      layouts: '',\n\n      //导出excel\n      json_fields: {\n        '图书编号': \"tushuUuidNumber\",\n        '图书标题': \"tushuName\",\n        '图书类型': \"tushuTypes\",\n        '图书封面': \"tushuPhoto\",\n        '图书作者': \"tushuZuozhe\",\n        '图书出版社': \"chubansheTypes\",\n        '所在书架': \"shujiaTypes\",\n        '图书数量': \"tushuNumber\",\n        '发布时间': \"insertTime\",\n      },\n\n    };\n  },\n  created() {\n    this.contents = styleJs.listStyle();\n    this.init();\n    this.getDataList();\n    this.contentStyleChange()\n  },\n  mounted() {\n    //获取当前登录用户的信息\n    this.sessionTable = this.$storage.get(\"sessionTable\");\n    this.role = this.$storage.get(\"role\");\n    this.userId = this.$storage.get(\"userId\");\n\n  },\n  filters: {\n    htmlfilter: function (val) {\n      return val.replace(/<[^>]*>/g).replace(/undefined/g,'');\n    }\n  },\n  components: {\n    AddOrUpdate,\n  },\n  computed: {\n  },\n  methods: {\n    chartDialog() {\n      let _this = this;\n      let params = {\n        dateFormat :\"%Y\", //%Y-%m\n        riqi :_this.echartsDate.getFullYear(),\n        thisTable : {//当前表\n          tableName :\"tushu\",//当前表表名,\n          sumColum : 'tushu_number', //求和字段\n          date : 'insert_time',//分组日期字段\n        },\n      }\n      _this.chartVisiable = true;\n      _this.$nextTick(() => {\n        var statistic = this.$echarts.init(document.getElementById(\"statistic\"), 'macarons');\n        this.$http({\n          url: \"barSum\",\n          method: \"get\",\n          params: params\n        }).then(({data}) => {\n          if(data && data.code === 0){\n            let yAxisName = \"数值\";\n            let xAxisName = \"月份\";\n            let series = [];\n            data.data.yAxis.forEach(function (item,index) {\n              let tempMap = {};\n              tempMap.name=data.data.legend[index];\n              tempMap.type='bar';\n              tempMap.data=item;\n              series.push(tempMap);\n            })\n\n            var option = {\n              tooltip: {\n                trigger: 'axis',\n                axisPointer: {\n                  type: 'cross',\n                  crossStyle: { color: '#999' }\n                }\n              },\n              toolbox: {\n                feature: {\n                  magicType: { show: true, type: ['line', 'bar'] },\n                  saveAsImage: { show: true }\n                }\n              },\n              legend: { data: data.data.legend },\n              xAxis: [\n                {\n                  type: 'category',\n                  name: xAxisName,\n                  data: data.data.xAxis,\n                  axisPointer: { type: 'shadow' }\n                }\n              ],\n              yAxis: [\n                {\n                  type: 'value',\n                  name: yAxisName,\n                  axisLabel: { formatter: '{value}' }\n                }\n              ],\n              series:series\n            };\n            statistic.setOption(option,true);\n            window.onresize = function () {\n              statistic.resize();\n            };\n          }else {\n            this.$message({\n              message: \"报表未查询到数据\",\n              type: \"success\",\n              duration: 1500,\n              onClose: () => {\n                this.search();\n              }\n            });\n          }\n        });\n      });\n    },\n\n    contentStyleChange() {\n      this.contentSearchStyleChange()\n      this.contentBtnAdAllStyleChange()\n      this.contentSearchBtnStyleChange()\n      this.contentTableBtnStyleChange()\n      this.contentPageStyleChange()\n    },\n    contentSearchStyleChange() {\n      this.$nextTick(() => {\n        document.querySelectorAll('.form-content .slt .el-input__inner').forEach(el => {\n          let textAlign = 'left'\n          if(this.contents.inputFontPosition == 2)\n            textAlign = 'center'\n          if (this.contents.inputFontPosition == 3) textAlign = 'right'\n          el.style.textAlign = textAlign\n          el.style.height = this.contents.inputHeight\n          el.style.lineHeight = this.contents.inputHeight\n          el.style.color = this.contents.inputFontColor\n          el.style.fontSize = this.contents.inputFontSize\n          el.style.borderWidth = this.contents.inputBorderWidth\n          el.style.borderStyle = this.contents.inputBorderStyle\n          el.style.borderColor = this.contents.inputBorderColor\n          el.style.borderRadius = this.contents.inputBorderRadius\n          el.style.backgroundColor = this.contents.inputBgColor\n        })\n        if (this.contents.inputTitle) {\n          document.querySelectorAll('.form-content .slt .el-form-item__label').forEach(el => {\n            el.style.color = this.contents.inputTitleColor\n            el.style.fontSize = this.contents.inputTitleSize\n            el.style.lineHeight = this.contents.inputHeight\n          })\n        }\n        setTimeout(() => {\n          document.querySelectorAll('.form-content .slt .el-input__prefix').forEach(el => {\n            el.style.color = this.contents.inputIconColor\n            el.style.lineHeight = this.contents.inputHeight\n          })\n          document.querySelectorAll('.form-content .slt .el-input__suffix').forEach(el => {\n            el.style.color = this.contents.inputIconColor\n            el.style.lineHeight = this.contents.inputHeight\n          })\n          document.querySelectorAll('.form-content .slt .el-input__icon').forEach(el => {\n            el.style.lineHeight = this.contents.inputHeight\n          })\n        }, 10 )\n      })\n    },\n    // 搜索按钮\n    contentSearchBtnStyleChange() {\n      this.$nextTick(() => {\n        document.querySelectorAll('.form-content .slt .el-button--success').forEach(el => {\n          el.style.height = this.contents.searchBtnHeight\n          el.style.color = this.contents.searchBtnFontColor\n          el.style.fontSize = this.contents.searchBtnFontSize\n          el.style.borderWidth = this.contents.searchBtnBorderWidth\n          el.style.borderStyle = this.contents.searchBtnBorderStyle\n          el.style.borderColor = this.contents.searchBtnBorderColor\n          el.style.borderRadius = this.contents.searchBtnBorderRadius\n          el.style.backgroundColor = this.contents.searchBtnBgColor\n        })\n      })\n    },\n    // 新增、批量删除\n    contentBtnAdAllStyleChange() {\n      this.$nextTick(() => {\n        document.querySelectorAll('.form-content .ad .el-button--success').forEach(el => {\n          el.style.height = this.contents.btnAdAllHeight\n          el.style.color = this.contents.btnAdAllAddFontColor\n          el.style.fontSize = this.contents.btnAdAllFontSize\n          el.style.borderWidth = this.contents.btnAdAllBorderWidth\n          el.style.borderStyle = this.contents.btnAdAllBorderStyle\n          el.style.borderColor = this.contents.btnAdAllBorderColor\n          el.style.borderRadius = this.contents.btnAdAllBorderRadius\n          el.style.backgroundColor = this.contents.btnAdAllAddBgColor\n        })\n        document.querySelectorAll('.form-content .ad .el-button--danger').forEach(el => {\n          el.style.height = this.contents.btnAdAllHeight\n          el.style.color = this.contents.btnAdAllDelFontColor\n          el.style.fontSize = this.contents.btnAdAllFontSize\n          el.style.borderWidth = this.contents.btnAdAllBorderWidth\n          el.style.borderStyle = this.contents.btnAdAllBorderStyle\n          el.style.borderColor = this.contents.btnAdAllBorderColor\n          el.style.borderRadius = this.contents.btnAdAllBorderRadius\n          el.style.backgroundColor = this.contents.btnAdAllDelBgColor\n        })\n        document.querySelectorAll('.form-content .ad .el-button--warning').forEach(el => {\n          el.style.height = this.contents.btnAdAllHeight\n          el.style.color = this.contents.btnAdAllWarnFontColor\n          el.style.fontSize = this.contents.btnAdAllFontSize\n          el.style.borderWidth = this.contents.btnAdAllBorderWidth\n          el.style.borderStyle = this.contents.btnAdAllBorderStyle\n          el.style.borderColor = this.contents.btnAdAllBorderColor\n          el.style.borderRadius = this.contents.btnAdAllBorderRadius\n          el.style.backgroundColor = this.contents.btnAdAllWarnBgColor\n        })\n      })\n    },\n    // 表格\n    rowStyle({row, rowIndex}) {\n      if (rowIndex % 2 == 1) {\n        if (this.contents.tableStripe) {\n          return {color: this.contents.tableStripeFontColor}\n        }\n      } else {\n        return ''\n      }\n    },\n    cellStyle({row, rowIndex}) {\n      if (rowIndex % 2 == 1) {\n        if (this.contents.tableStripe) {\n          return {backgroundColor: this.contents.tableStripeBgColor}\n        }\n      } else {\n        return ''\n      }\n    },\n    headerRowStyle({row, rowIndex}) {\n      return {color: this.contents.tableHeaderFontColor}\n    },\n    headerCellStyle({row, rowIndex}) {\n      return {backgroundColor: this.contents.tableHeaderBgColor}\n    },\n    // 表格按钮\n    contentTableBtnStyleChange() {\n    },\n    // 分页\n    contentPageStyleChange() {\n      let arr = []\n      if (this.contents.pageTotal) arr.push('total')\n      if (this.contents.pageSizes) arr.push('sizes')\n      if (this.contents.pagePrevNext) {\n        arr.push('prev')\n        if (this.contents.pagePager) arr.push('pager')\n        arr.push('next')\n      }\n      if (this.contents.pageJumper) arr.push('jumper')\n      this.layouts = arr.join()\n      this.contents.pageEachNum = 10\n    },\n\n    init() {\n    },\n    search() {\n      this.pageIndex = 1;\n      this.getDataList();\n    },\n    // 获取数据列表\n    getDataList() {\n      this.dataListLoading = true;\n      let params = {\n        page: this.pageIndex,\n        limit: this.pageSize,\n        sort: 'id',\n      }\n\n      if (this.searchForm.tushuName!= '' && this.searchForm.tushuName!= undefined) {\n        params['tushuName'] = '%' + this.searchForm.tushuName + '%'\n      }\n\n      if (this.searchForm.tushuTypes!= '' && this.searchForm.tushuTypes!= undefined) {\n        params['tushuTypes'] = this.searchForm.tushuTypes\n      }\n\n      params['tushuDelete'] = 1// 逻辑删除字段 1 未删除 2 删除\n\n      this.$http({\n        url: \"tushu/page\",\n        method: \"get\",\n        params: params\n      }).then(({data}) => {\n        if(data && data.code === 0){\n          this.dataList = data.data.list;\n          this.totalPage = data.data.total;\n        }else{\n          this.dataList = [];\n          this.totalPage = 0;\n        }\n        this.dataListLoading = false;\n      });\n\n      this.$http({\n        url: \"dictionary/page?dicCode=tushu_types&page=1&limit=100\",\n        method: \"get\",\n      }).then(({data}) => {\n        if(data && data.code === 0){\n          this.tushuTypesSelectSearch = data.data.list;\n        }\n      });\n    },\n    //每页数\n    sizeChangeHandle(val) {\n      this.pageSize = val;\n      this.pageIndex = 1;\n      this.getDataList();\n    },\n    // 当前页\n    currentChangeHandle(val) {\n      this.pageIndex = val;\n      this.getDataList();\n    },\n    // 多选\n    selectionChangeHandler(val) {\n      this.dataListSelections = val;\n    },\n    // 添加/修改\n    addOrUpdateHandler(id, type) {\n      this.showFlag = false;\n      this.addOrUpdateFlag = true;\n      this.crossAddOrUpdateFlag = false;\n      if (type != 'info') {\n        type = 'else';\n      }\n      this.$nextTick(() => {\n        this.$refs.addOrUpdate.init(id, type);\n      });\n    },\n    // 下载\n    download(file) {\n      window.open(\" ${file} \")\n    },\n    // 删除\n    deleteHandler(id) {\n      var ids = id ? [Number(id)] : this.dataListSelections.map(item => {\n        return Number(item.id);\n      });\n\n      this.$confirm(`确定进行[${id ? \"删除\" : \"批量删除\"}]操作?`, \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(() => {\n        this.$http({\n          url: \"tushu/delete\",\n          method: \"post\",\n          data: ids\n        }).then(({data}) => {\n          if(data && data.code === 0){\n            this.$message({\n              message: \"操作成功\",\n              type: \"success\",\n              duration: 1500,\n              onClose: () => {\n                this.search();\n              }\n            });\n          }else{\n            this.$message.error(data.msg);\n          }\n        });\n      });\n    },\n    // 导入功能上传文件成功后调用导入方法\n    tushuUploadSuccess(data){\n      let _this = this;\n      _this.$http({\n        url: \"tushu/batchInsert?fileName=\" + data.file,\n        method: \"get\"\n      }).then(({data}) => {\n        if(data && data.code === 0){\n          _this.$message({\n            message: \"导入图书信息数据成功\",\n            type: \"success\",\n            duration: 1500,\n            onClose: () => {\n              _this.search();\n            }\n          });\n        }else{\n          _this.$message.error(data.msg);\n        }\n      });\n    },\n    // 导入功能上传文件失败后调用导入方法\n    tushuUploadError(data){\n      this.$message.error('上传失败');\n    },\n\n    // ✅ 新增：打开借阅弹窗\n    openBorrow(row) {\n      this.currentRow = row\n      this.borrowDays = 1\n      this.dialogVisible = true\n    },\n\n    // ✅ 新增：提交借阅（只用 $http，不引入新依赖，不动原接口风格）\n    submitBorrow() {\n      const userId = this.userId || sessionStorage.getItem(\"userId\")\n      if (!userId) {\n        this.$message.error(\"未获取到用户信息，请重新登录\")\n        return\n      }\n      if (!this.currentRow || !this.currentRow.id) {\n        this.$message.error(\"未选择图书\")\n        return\n      }\n\n      this.$http({\n        url: \"tushujieyue/add\",\n        method: \"post\",\n        data: {\n          tushuId: this.currentRow.id,\n          yonghuId: Number(userId),\n          tushujieyueShijian: Number(this.borrowDays),\n          tushujieyueTypes: 1\n        }\n      }).then(({data}) => {\n        if (data && data.code === 0) {\n          this.$message.success(\"借阅成功\")\n          this.dialogVisible = false\n          this.getDataList() // 刷新库存\n        } else {\n          this.$message.error((data && data.msg) || \"借阅失败\")\n        }\n      }).catch((e) => {\n        console.error(e)\n        this.$message.error(e?.response?.data?.msg || e?.message || \"借阅失败\")\n      })\n    },\n\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.slt {\n  margin: 0 !important;\n  display: flex;\n}\n\n.ad {\n  margin: 0 !important;\n  display: flex;\n}\n\n.pages {\n  ::v-deep el-pagination__sizes{\n    ::v-deep el-input__inner {\n      height: 22px;\n      line-height: 22px;\n    }\n  }\n}\n\n.el-button+.el-button {\n  margin:0;\n}\n\n.tables {\n  ::v-deep .el-button--success {\n    height: 40px;\n    color: rgba(88, 84, 84, 1);\n    font-size: 10px;\n    border-width: 1px;\n    border-style: solid;\n    border-color: #DCDFE6;\n    border-radius: 20px;\n    background-color: rgba(153, 204, 51, 1);\n  }\n\n  ::v-deep .el-button--primary {\n    height: 40px;\n    color: rgba(91, 87, 87, 1);\n    font-size: 10px;\n    border-width: 1px;\n    border-style: solid;\n    border-color: #DCDFE6;\n    border-radius: 20px;\n    background-color: rgba(255, 255, 102, 1);\n  }\n\n  ::v-deep .el-button--danger {\n    height: 40px;\n    color: rgba(255, 255, 255, 1);\n    font-size: 10px;\n    border-width: 1px;\n    border-style: solid;\n    border-color: #DCDFE6;\n    border-radius: 20px;\n    background-color: rgba(51, 102, 0, 1);\n  }\n\n  ::v-deep .el-button {\n    margin: 4px;\n  }\n}\n</style>\n"]}]}