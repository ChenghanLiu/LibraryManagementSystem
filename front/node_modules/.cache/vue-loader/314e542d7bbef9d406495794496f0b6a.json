{"remainingRequest":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuchenghan/Desktop/LibraryManagementSystem/front/src/views/login.vue?vue&type=style&index=0&id=7589b93f&scoped=true&lang=css","dependencies":[{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/src/views/login.vue","mtime":1772220174906},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/css-loader/dist/cjs.js","mtime":1772203474308},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1772203474027},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/postcss-loader/src/index.js","mtime":1772203474045},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/cache-loader/dist/cjs.js","mtime":1772203478686},{"path":"/Users/liuchenghan/Desktop/LibraryManagementSystem/front/node_modules/vue-loader/lib/index.js","mtime":1772203474026}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8qIOWFqOWxj+W8uuWItuimhuebliAqLwoubG9naW4tcm9vdCB7CiAgcG9zaXRpb246IGZpeGVkICFpbXBvcnRhbnQ7CiAgaW5zZXQ6IDAgIWltcG9ydGFudDsKICB3aWR0aDogMTAwdncgIWltcG9ydGFudDsKICBoZWlnaHQ6IDEwMHZoICFpbXBvcnRhbnQ7CiAgei1pbmRleDogOTk5OTk5ICFpbXBvcnRhbnQ7CgogIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDsKICBhbGlnbi1pdGVtczogY2VudGVyICFpbXBvcnRhbnQ7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXIgIWltcG9ydGFudDsKCiAgYmFja2dyb3VuZDogI2Y1ZjZmOCAhaW1wb3J0YW50OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3ggIWltcG9ydGFudDsKICBwYWRkaW5nOiAyNHB4ICFpbXBvcnRhbnQ7Cn0KCi8qIOeZu+W9leWNoeeJhyAqLwoubG9naW4tY2FyZCB7CiAgd2lkdGg6IDM4MHB4OwogIG1heC13aWR0aDogOTJ2dzsKICBiYWNrZ3JvdW5kOiAjZmZmOwogIGJvcmRlci1yYWRpdXM6IDE0cHg7CiAgcGFkZGluZzogMjRweDsKICBib3gtc2hhZG93OiAwIDEycHggMzJweCByZ2JhKDAsIDAsIDAsIDAuMDYpOwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KCi50aXRsZSB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0KCi50aXRsZS1tYWluIHsKICBmb250LXNpemU6IDIwcHg7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBjb2xvcjogIzExMTgyNzsKfQoKLnRpdGxlLXN1YiB7CiAgZm9udC1zaXplOiAxM3B4OwogIGNvbG9yOiAjNmI3MjgwOwogIG1hcmdpbi10b3A6IDZweDsKfQoKLnJvbGUtbGFiZWwgewogIGZvbnQtc2l6ZTogMTNweDsKICBjb2xvcjogIzZiNzI4MDsKICBtYXJnaW4tYm90dG9tOiA2cHg7Cn0KCi5yb2xlLW9wdGlvbnMgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC13cmFwOiB3cmFwOwogIGdhcDogMTBweDsKfQoKLmxvZ2luLWJ0biB7CiAgd2lkdGg6IDEwMCU7CiAgbWFyZ2luLXRvcDogMTBweDsKICBoZWlnaHQ6IDQwcHg7CiAgYm9yZGVyLXJhZGl1czogOHB4Owp9CgouYWN0aW9ucyB7CiAgbWFyZ2luLXRvcDogMTJweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5saW5rIHsKICBmb250LXNpemU6IDEzcHg7CiAgY29sb3I6ICM0MDllZmY7CiAgY3Vyc29yOiBwb2ludGVyOwp9Cg=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";AAwHA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login-root\">\n    <div class=\"login-card\">\n      <div class=\"title\">\n        <div class=\"title-main\">图书管理系统</div>\n        <div class=\"title-sub\">请使用账号密码登录</div>\n      </div>\n\n      <el-form label-position=\"left\" label-width=\"0px\">\n        <el-form-item>\n          <el-input\n              placeholder=\"请输入用户名\"\n              v-model=\"rulesForm.username\"\n          />\n        </el-form-item>\n\n        <el-form-item>\n          <el-input\n              placeholder=\"请输入密码\"\n              type=\"password\"\n              v-model=\"rulesForm.password\"\n          />\n        </el-form-item>\n\n        <el-form-item>\n          <div class=\"role-label\">角色</div>\n          <div class=\"role-options\">\n            <el-radio\n                v-for=\"item in backLoginMenus\"\n                :key=\"item.roleName\"\n                v-model=\"rulesForm.role\"\n                :label=\"item.roleName\"\n            >\n              {{ item.roleName }}\n            </el-radio>\n          </div>\n        </el-form-item>\n\n        <el-button type=\"primary\" class=\"login-btn\" @click=\"login\">\n          登录\n        </el-button>\n\n        <div class=\"actions\">\n          <span class=\"link\" @click=\"register('yonghu')\">用户注册</span>\n        </div>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport menu from \"@/utils/menu\";\n\nexport default {\n  data() {\n    return {\n      rulesForm: {\n        username: \"\",\n        password: \"\",\n        role: \"\"\n      },\n      menus: [],\n      tableName: \"\"\n    };\n  },\n\n  computed: {\n    backLoginMenus() {\n      return (this.menus || []).filter(\n          item => item.hasBackLogin == \"是\"\n      );\n    }\n  },\n\n  mounted() {\n    this.menus = menu.list();\n  },\n\n  methods: {\n    register(tableName) {\n      this.$storage.set(\"loginTable\", tableName);\n      this.$router.push({ path: \"/register\" });\n    },\n\n    login() {\n      if (!this.rulesForm.username)\n        return this.$message.error(\"请输入用户名\");\n      if (!this.rulesForm.password)\n        return this.$message.error(\"请输入密码\");\n      if (!this.rulesForm.role)\n        return this.$message.error(\"请选择角色\");\n\n      for (let i = 0; i < this.menus.length; i++) {\n        if (this.menus[i].roleName == this.rulesForm.role) {\n          this.tableName = this.menus[i].tableName;\n          break;\n        }\n      }\n\n      this.$http({\n        url: `${this.tableName}/login?username=${this.rulesForm.username}&password=${this.rulesForm.password}`,\n        method: \"post\"\n      }).then(({ data }) => {\n        if (data && data.code === 0) {\n          this.$storage.set(\"Token\", data.token);\n          this.$storage.set(\"userId\", data.userId);\n          this.$storage.set(\"role\", this.rulesForm.role);\n          this.$storage.set(\"sessionTable\", this.tableName);\n          this.$storage.set(\"adminName\", this.rulesForm.username);\n          this.$router.replace({ path: \"/index/\" });\n        } else {\n          this.$message.error(data.msg);\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* 全屏强制覆盖 */\n.login-root {\n  position: fixed !important;\n  inset: 0 !important;\n  width: 100vw !important;\n  height: 100vh !important;\n  z-index: 999999 !important;\n\n  display: flex !important;\n  align-items: center !important;\n  justify-content: center !important;\n\n  background: #f5f6f8 !important;\n  box-sizing: border-box !important;\n  padding: 24px !important;\n}\n\n/* 登录卡片 */\n.login-card {\n  width: 380px;\n  max-width: 92vw;\n  background: #fff;\n  border-radius: 14px;\n  padding: 24px;\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.06);\n  box-sizing: border-box;\n}\n\n.title {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.title-main {\n  font-size: 20px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.title-sub {\n  font-size: 13px;\n  color: #6b7280;\n  margin-top: 6px;\n}\n\n.role-label {\n  font-size: 13px;\n  color: #6b7280;\n  margin-bottom: 6px;\n}\n\n.role-options {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.login-btn {\n  width: 100%;\n  margin-top: 10px;\n  height: 40px;\n  border-radius: 8px;\n}\n\n.actions {\n  margin-top: 12px;\n  text-align: center;\n}\n\n.link {\n  font-size: 13px;\n  color: #409eff;\n  cursor: pointer;\n}\n</style>"]}]}